<html>
<head>
<title>Wizard Internet Settings</title>
<LINK REL="stylesheet" HREF="/style/handaer.css" TYPE="text/css" media="all">
<link rel="stylesheet" href="/style/normal_ws.css" type="text/css">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="/lang/b28n.js"></script>
<script language="JavaScript" type="text/javascript" src="/style/load.js"></script>
<script language="JavaScript" type="text/javascript">
function getCookie()
{ 
	var strCookie=document.cookie; 
	var arrCookie=strCookie.split("; "); 
	for(var i=0;i<arrCookie.length;i++)
	{ 
		var arr=arrCookie[i].split("="); 
		if(arr[0]=="userName")
		{
			//alert("已经登录");
			return true;
		}
	} 
	//alert("未登录");
	return false; 
}
if(getCookie())
{
	
}
else
{
	window.top.location.href="../login.html";	
}
Butterlate.setTextDomain("admin");
var showothers;
var showoadv0;
var step_num;
var pppoecdb = "0";

function style_display_on()
{
	if (window.ActiveXObject)
	{ // IE
		return "inline-block";
	}
	else if (window.XMLHttpRequest)
	{ // Mozilla, Safari,...
		return "";
	}
}
function widget_hide	(widgetID){document.getElementById(widgetID).style.visibility = "hidden";document.getElementById(widgetID).style.display = "none";}
function widget_display	(widgetID){document.getElementById(widgetID).style.visibility = "visible";document.getElementById(widgetID).style.display = style_display_on();}

function widget_enable	(widgetID){document.getElementById(widgetID).disabled = false;}
function widget_disable	(widgetID){document.getElementById(widgetID).disabled = true;}
function button_commit(buttonID){document.getElementById(buttonID).click();}
function butwork(zhi1,zhi2,zhi3,zhi4)
{
	if(zhi1 == "false")
	{
		document.getElementById("bBACK").style.visibility = "visible";
		document.getElementById("bBACK").style.display = style_display_on();
	}
	else
	{
		document.getElementById("bBACK").style.visibility = "hidden";
		document.getElementById("bBACK").style.display = "none";
	}
	
	if(zhi2 == "false")
	{
		document.getElementById("bNEXT").style.visibility = "visible";
		document.getElementById("bNEXT").style.display = style_display_on();
	}
	else
	{
		document.getElementById("bNEXT").style.visibility = "hidden";
		document.getElementById("bNEXT").style.display = "none";
	}

		if(zhi3 == "false")
	{
		document.getElementById("bCANCEL").style.visibility = "visible";
		document.getElementById("bCANCEL").style.display = style_display_on();
	}
	else
	{
		document.getElementById("bCANCEL").style.visibility = "hidden";
		document.getElementById("bCANCEL").style.display = "none";
	}

		if(zhi4 == "false")
	{
		document.getElementById("bAPPLY").style.visibility = "visible";
		document.getElementById("bAPPLY").style.display = style_display_on();
	}
	else
	{
		document.getElementById("bAPPLY").style.visibility = "hidden";
		document.getElementById("bAPPLY").style.display = "none";
	}

}
function checkInjection(str)
{
	var len = str.length;
	for (var i=0; i<str.length; i++) {
		if ( str.charAt(i) == '\r' || str.charAt(i) == '\n'){
				return false;
		}else
	        continue;
	}
    return true;
}

function change_step(offset)
{
	if (offset == 1)
	{
		if (step_num == 1)
		{
			if (!CheckWanValue())
				return false;
		}
	}
	//hideAllTables();
	if (offset == 0)
		step_num = offset;
	else
		step_num += offset;

	if (step_num == 1)
	{
		if (document.wizard_form.WAN_MODE[0].checked == true) 
		{
			document.getElementById("buttontable").style.visibility = "hidden";
			document.getElementById("buttontable").style.display = "none";	
			window.parent.Demo(_("admw waiting"));
			button_commit('AUTOGET');
		}
		else if (document.wizard_form.WAN_MODE[1].checked == true) 
		{
	
			waitgifshow();
			button_commit('DHCP');
		}
		else
		{
			//document.getElementById("modedes").style.visibility = "visible";
			//document.getElementById("modedes").style.display = style_display_on();
			hideAllTables();
			connectionTypeSwitch();
			butwork("false","true","true","false");
		}
	}
	else if (step_num == 2)
	{
		if (document.wizard_form.WAN_MODE[1].checked == true) 
		{
			waitgifshow();
			document.wizard_form.AUTOTYPE.disabled=true;
			button_commit('DHCP');
		}
		else if (document.wizard_form.WAN_MODE[2].checked == true) 
		{
			waitgifshow();
			document.wizard_form.AUTOTYPE.disabled=true;
			button_commit('SIP');
		}
		else if (document.wizard_form.WAN_MODE[3].checked == true) 
		{
			waitgifshow();
			document.wizard_form.AUTOTYPE.disabled=true;
			window.parent.pppoe_tiaozhuan();
			button_commit('PPP');
		}
		else if (document.wizard_form.WAN_MODE[4].checked == true) 
		{
			waitgifshow();
			document.wizard_form.AUTOTYPE.disabled=true;
			button_commit('L2TP');
		}
		else if (document.wizard_form.WAN_MODE[5].checked == true) 
		{
			waitgifshow();
			document.wizard_form.AUTOTYPE.disabled=true;
			button_commit('P2TP');
		}
		else 
		{
			alert("typeerror");
		}
		document.getElementById("buttontable").style.visibility = "hidden";
		document.getElementById("buttontable").style.display = "none";	
		
	}
	else
	{
		window.location.href="w2?INDEX=00";
	}
	window.parent.iFrameHeight();
	return true;
}

function hideAllTables()
{

	document.getElementById("div_wan_opmode").style.visibility = "hidden";
	document.getElementById("div_wan_opmode").style.display = "none";
	document.getElementById("modedes").style.visibility = "hidden";
	document.getElementById("modedes").style.display = "none";
	
	hideWanOption();

}

function hideWanOption()
{
	document.getElementById("STIP_title").style.visibility = "hidden";
	document.getElementById("STIP_title").style.display = "none";
	document.getElementById("div_wan_static").style.visibility = "hidden";
	document.getElementById("div_wan_static").style.display = "none";
	document.getElementById("PPP_title").style.visibility = "hidden";
	document.getElementById("PPP_title").style.display = "none";
	document.getElementById("div_wan_pppoe").style.visibility = "hidden";
	document.getElementById("div_wan_pppoe").style.display = "none";
	document.getElementById("div_wan_l2tp").style.visibility = "hidden";
	document.getElementById("div_wan_l2tp").style.display = "none";
	document.getElementById("div_wan_pptp").style.visibility = "hidden";
	document.getElementById("div_wan_pptp").style.display = "none";
	document.getElementById("div_wan_3G").style.visibility = "hidden";
	document.getElementById("div_wan_3G").style.display = "none";
}

function disableWanSettings()
{
	document.wizard_form.WAN_IPADDR.disabled = true;
	document.wizard_form.WAN_NETMASK.disabled = true;
	document.wizard_form.IPGW.disabled = true;
	document.wizard_form.PRIDNS.disabled = true;
	document.wizard_form.SECDNS.disabled = true;
	document.wizard_form.PPPOE_USER.disabled = true;
	document.wizard_form.PPPOE_PWD.disabled = true;
	document.wizard_form.PPPOE_MODE.disabled = true;
	document.wizard_form.PPPOE_DEMAND.disabled = true;
	document.wizard_form.PPPOE_MANUAL.disabled = true;
	document.wizard_form.PPPOE_TIMING_BH.disabled = true;
	document.wizard_form.PPPOE_TIMING_BM.disabled = true;
	document.wizard_form.PPPOE_TIMING_EH.disabled = true;
	document.wizard_form.PPPOE_TIMING_EM.disabled = true;
	document.wizard_form.l2tpServer.disabled = true;
	document.wizard_form.l2tpUser.disabled = true;
	document.wizard_form.l2tpPass.disabled = true;
	document.wizard_form.l2tpMode.disabled = true;
	document.wizard_form.l2tpIp.disabled = true;
	document.wizard_form.l2tpNetmask.disabled = true;
	document.wizard_form.l2tpGateway.disabled = true;
	document.wizard_form.l2tpOPMode.disabled = true;
	document.wizard_form.l2tpRedialPeriod.disabled = true;
	document.wizard_form.pptpServer.disabled = true;
	document.wizard_form.pptpUser.disabled = true;
	document.wizard_form.pptpPass.disabled = true;
	document.wizard_form.pptpMode.disabled = true;
	document.wizard_form.pptpIp.disabled = true;
	document.wizard_form.pptpNetmask.disabled = true;
	document.wizard_form.pptpGateway.disabled = true;
	document.wizard_form.pptpOPMode.disabled = true;
	document.wizard_form.pptpRedialPeriod.disabled = true;
	document.wizard_form.Dev3G.disabled = true;
}

function connectionTypeSwitch()
{
	hideWanOption();
	if (document.wizard_form.WAN_MODE[2].checked == true) {
		document.getElementById("STIP_title").style.visibility = "visible";
		document.getElementById("STIP_title").style.display = style_display_on();
		document.getElementById("div_wan_static").style.visibility = "visible";
		document.getElementById("div_wan_static").style.display = style_display_on();
		document.wizard_form.WAN_IPADDR.disabled = false;
		document.wizard_form.WAN_NETMASK.disabled = false;
		document.wizard_form.IPGW.disabled = false;
		document.wizard_form.PRIDNS.disabled = false;
		document.wizard_form.SECDNS.disabled = false;
	}
	else if (document.wizard_form.WAN_MODE[3].checked == true) {
		document.getElementById("PPP_title").style.visibility = "visible";
		document.getElementById("PPP_title").style.display = style_display_on();
		document.getElementById("div_wan_pppoe").style.visibility = "visible";
		document.getElementById("div_wan_pppoe").style.display = style_display_on();
		document.wizard_form.PPPOE_USER.disabled = false;
		document.wizard_form.PPPOE_PWD.disabled = false;
		if (pppoecdb == "1")
		{
			document.getElementById("div_pppoe_opmode").style.visibility = "hidden";
			document.getElementById("div_pppoe_opmode").style.display = "none";
		}
		else 
		{
			document.wizard_form.PPPOE_MODE.disabled = false;
		}
		//pppoeOPModeSwitch();
	}
	else if (document.wizard_form.WAN_MODE[4].checked == true) {
		document.getElementById("div_wan_l2tp").style.visibility = "visible";
		document.getElementById("div_wan_l2tp").style.display = style_display_on();
		document.wizard_form.l2tpServer.disabled = false;
		document.wizard_form.l2tpUser.disabled = false;
		document.wizard_form.l2tpPass.disabled = false;
		document.wizard_form.l2tpMode.disabled = false;
		document.wizard_form.l2tpIp.disabled = false;
		document.wizard_form.l2tpNetmask.disabled = false;
		document.wizard_form.l2tpGateway.disabled = false;
		document.wizard_form.l2tpOPMode.disabled = false;
		l2tpOPModeSwitch();
	}
	else if (document.wizard_form.WAN_MODE[5].checked == true) {
		document.getElementById("div_wan_pptp").style.visibility = "visible";
		document.getElementById("div_wan_pptp").style.display = style_display_on();
		document.wizard_form.pptpServer.disabled = false;
		document.wizard_form.pptpUser.disabled = false;
		document.wizard_form.pptpPass.disabled = false;
		document.wizard_form.pptpMode.disabled = false;
		document.wizard_form.pptpIp.disabled = false;
		document.wizard_form.pptpNetmask.disabled = false;
		document.wizard_form.pptpGateway.disabled = false;
		document.wizard_form.pptpOPMode.disabled = false;
		pptpOPModeSwitch();
	}
	else if (document.wizard_form.WAN_MODE[6].checked == true) {
		document.getElementById("div_wan_3G").style.visibility = "visible";
		document.getElementById("div_wan_3G").style.display = style_display_on();
		document.wizard_form.Dev3G.disabled = false;
	}
}

function l2tpModeSwitch()
{
	if (document.wizard_form.l2tpMode.selectedIndex == 0) {
		document.getElementById("div_l2tpIp").style.visibility = "visible";
		document.getElementById("div_l2tpIp").style.display = style_display_on();
		document.getElementById("div_l2tpNetmask").style.visibility = "visible";
		document.getElementById("div_l2tpNetmask").style.display = style_display_on();
		document.getElementById("div_l2tpGateway").style.visibility = "visible";
		document.getElementById("div_l2tpGateway").style.display = style_display_on();
	}
	else {
		document.getElementById("div_l2tpIp").style.visibility = "hidden";
		document.getElementById("div_l2tpIp").style.display = "none";
		document.getElementById("div_l2tpNetmask").style.visibility = "hidden";
		document.getElementById("div_l2tpNetmask").style.display = "none";
		document.getElementById("div_l2tpGateway").style.visibility = "hidden";
		document.getElementById("div_l2tpGateway").style.display = "none";
	}
}

function pptpModeSwitch()
{
	if (document.wizard_form.pptpMode.selectedIndex == 0) {
		document.getElementById("div_pptpIp").style.visibility = "visible";
		document.getElementById("div_pptpIp").style.display = style_display_on();
		document.getElementById("div_pptpNetmask").style.visibility = "visible";
		document.getElementById("div_pptpNetmask").style.display = style_display_on();
		document.getElementById("div_pptpGateway").style.visibility = "visible";
		document.getElementById("div_pptpGateway").style.display = style_display_on();
	}
	else {
		document.getElementById("div_pptpIp").style.visibility = "hidden";
		document.getElementById("div_pptpIp").style.display = "none";
		document.getElementById("div_pptpNetmask").style.visibility = "hidden";
		document.getElementById("div_pptpNetmask").style.display = "none";
		document.getElementById("div_pptpGateway").style.visibility = "hidden";
		document.getElementById("div_pptpGateway").style.display = "none";
	}
}

function pppoeOPModeSwitch()
{
	document.wizard_form.PPPOE_DEMAND.disabled = true;
	document.wizard_form.PPPOE_MANUAL.disabled = true;
	
	document.wizard_form.PPPOE_TIMING_BH.disabled = true;
	document.wizard_form.PPPOE_TIMING_BM.disabled = true;
	document.wizard_form.PPPOE_TIMING_EH.disabled = true;
	document.wizard_form.PPPOE_TIMING_EM.disabled = true;
	
	widget_hide("div_pppoe_opmode_setting");	
	widget_hide("hide1");	
	widget_hide("hide2");	
	widget_hide("hide3");
	
	if (pppoecdb == "1")
	{
		document.getElementById("div_pppoe_opmode_setting").style.visibility = "hidden";
		document.getElementById("div_pppoe_opmode_setting").style.display = "none";
	}
	else
	{
		if (document.wizard_form.PPPOE_MODE.selectedIndex == 1) 
		{
			widget_display("div_pppoe_opmode_setting");	
			widget_display("hide1");	
			document.wizard_form.PPPOE_DEMAND.disabled = false;
		}
		else if (document.wizard_form.PPPOE_MODE.selectedIndex == 2)
		{
			widget_display("div_pppoe_opmode_setting");	
			widget_display("hide2");	
			document.wizard_form.PPPOE_MANUAL.disabled = false;
		}
		else if (document.wizard_form.PPPOE_MODE.selectedIndex == 3)
		{
			widget_display("div_pppoe_opmode_setting");	
			widget_display("hide3");	
			document.wizard_form.PPPOE_TIMING_BH.disabled = false;
			document.wizard_form.PPPOE_TIMING_BM.disabled = false;
			document.wizard_form.PPPOE_TIMING_EH.disabled = false;
			document.wizard_form.PPPOE_TIMING_EM.disabled = false;
		}
	}
}

function l2tpOPModeSwitch()
{
	document.wizard_form.l2tpRedialPeriod.disabled = true;
	// document.wizard_form.l2tpIdleTime.disabled = true;
	if (document.wizard_form.l2tpOPMode.selectedIndex == 0) 
		document.wizard_form.l2tpRedialPeriod.disabled = false;
	/*
	else if (document.wizard_form.l2tpOPMode.selectedIndex == 1)
		document.wizard_form.l2tpIdleTime.disabled = false;
	*/
}

function pptpOPModeSwitch()
{
	document.wizard_form.pptpRedialPeriod.disabled = true;
	// document.wizard_form.pptpIdleTime.disabled = true;
	if (document.wizard_form.pptpOPMode.selectedIndex == 0) 
		document.wizard_form.pptpRedialPeriod.disabled = false;
	/*
	else if (document.wizard_form.pptpOPMode.selectedIndex == 1)
		document.wizard_form.pptpIdleTime.disabled = false;
	*/
}

function atoi(str, num)
{
	i = 1;
	if (num != 1) {
		while (i != num && str.length != 0) {
			if (str.charAt(0) == '.') {
				i++;
			}
			str = str.substring(1);
		}
		if (i != num)
			return -1;
	}

	for (i=0; i<str.length; i++) {
		if (str.charAt(i) == '.') {
			str = str.substring(0, i);
			break;
		}
	}
	if (str.length == 0)
		return -1;
	return parseInt(str, 10);
}

function checkRange(str, num, min, max)
{
	d = atoi(str, num);
	if (d > max || d < min)
		return false;
	return true;
}

function isAllNum(str)
{
	for (var i=0; i<str.length; i++) {
		if ((str.charAt(i) >= '0' && str.charAt(i) <= '9') || (str.charAt(i) == '.' ))
			continue;
		return 0;
	}
	return 1;
}

function checkIpAddr(field, ismask)//1447
{
	if (field.value == "") 
	{
		if(ismask == 1)
		{
			alert(_("err IP empty"));
		}
		else if(ismask == 2)
		{
			alert(_("err sub empty"));
		}
		else if(ismask == 3)
		{	
			alert(_("err gw empty"));
		}
		else if(ismask == 4)
		{	
			alert(_("err DNS empty"));
		}

		field.value = field.defaultValue;
		field.focus();
		return false;
	}

	if (isAllNum(field.value) == 0) 
	{
		if(ismask == 1)
		{
			alert(_("err IP format"));
		}
		else if(ismask == 2)
		{	
			alert(_("err sub format"));
		}
		else if(ismask == 3)
		{	
			alert(_("err gw format"));
		}
		else if(ismask == 4)
		{
			alert(_("err DNS format"));
		}
		field.value = field.defaultValue;
		field.focus();
		return false;
	}

	if (ismask == 1)
	{
		if ((!checkRange(field.value, 1, 0, 255)) ||
				(!checkRange(field.value, 2, 0, 255)) ||
				(!checkRange(field.value, 3, 0, 255)) ||
				(!checkRange(field.value, 4, 1, 254)))
		{
			alert(_("err IP format"));
			field.value = field.defaultValue;
			field.focus();
			return false;
		}
	}
	else if (ismask == 2)
	{
		if ((!checkRange(field.value, 1, 0, 255)) ||
				(!checkRange(field.value, 2, 0, 255)) ||
				(!checkRange(field.value, 3, 0, 255)) ||
				(!checkRange(field.value, 4, 0, 255)))
		{
			alert(_("err sub format"));
			field.value = field.defaultValue;
			field.focus();
			return false;
		}
	}
	else if(ismask == 3)
	{
		if ((!checkRange(field.value, 1, 0, 255)) ||
				(!checkRange(field.value, 2, 0, 255)) ||
				(!checkRange(field.value, 3, 0, 255)) ||
				(!checkRange(field.value, 4, 1, 254)))
		{
			alert(_("err gw format"));
			field.value = field.defaultValue;
			field.focus();
			return false;
		}
	}
	else if(ismask == 4)
	{
		if ((!checkRange(field.value, 1, 0, 255)) ||
				(!checkRange(field.value, 2, 0, 255)) ||
				(!checkRange(field.value, 3, 0, 255)) ||
				(!checkRange(field.value, 4, 1, 254)))
		{
			alert(_("err DNS format"));
			field.value = field.defaultValue;
			field.focus();
			return false;
		}
	}
	{
		var exp=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
		var reg = field.value.match(exp);
		if(reg==null)
		{
			if(ismask == 1)
			{
				alert(_("err IP format"));
			}
			else if(ismask == 2)
			{	
				alert(_("err sub format"));
			}
			else if(ismask == 3)
			{	
				alert(_("err gw format"));
			}
			else if(ismask == 4)
			{
				alert(_("err DNS format"));
			}
			field.value = field.defaultValue;
			field.focus();
			return false;
		}
	}

	return true;
}
function checktimerange(value,min,max)
{
	var i = parseInt(value);
	if (isNaN(i))
	{
		return false;
	}
	else if (i > max || i < min)
	{
		return false;
	}
	return true;
}
function isNum(str)
{
	for (var i=0; i<str.length; i++) {
		if ((str.charAt(i) >= '0' && str.charAt(i) <= '9'))
			continue;
		return false;
	}
	return true;
}
function Checkhanzi(val)
{
	var usern = /^[a-zA-Z0-9_@]{1,}$/; 
	if (!val.match(usern)) 
		return false;
	else
		return true;
}
function CheckWanValue()
{
	if (document.wizard_form.WAN_MODE[2].checked == true)		//STATIC
	{      
		if (!checkIpAddr(document.wizard_form.WAN_IPADDR, 1))
		{
			document.wizard_form.WAN_IPADDR.select();
			return false;
		}
		{
			var myString1=document.wizard_form.WAN_IPADDR.value;//obj.options[index].text;
			var myString2=document.wizard_form.AP_locatIP.value;//obj.options[index].text;
			var a = myString1.lastIndexOf(".");
			var b = myString2.lastIndexOf(".");

			var s, ss;
	
			s = myString1.substr(0, a); // 获取子字符串。
			ss = myString2.substr(0, b); 
			if(s == ss)
			{
				alert(_("err IP error"));
				return false;
			}
		
		}
		if (!checkIpAddr(document.wizard_form.WAN_NETMASK, 2))
		{
			document.wizard_form.WAN_NETMASK.select();
			return false;
		}

		if (document.wizard_form.IPGW.value != "")
			if (!checkIpAddr(document.wizard_form.IPGW, 3))
			{
				document.wizard_form.IPGW.select();
				return false;
			}
		if (document.wizard_form.PRIDNS.value != "")
			if (!checkIpAddr(document.wizard_form.PRIDNS, 4))
			{
				document.wizard_form.PRIDNS.select();
				return false;
			}
		if (document.wizard_form.SECDNS.value != "")
			if (!checkIpAddr(document.wizard_form.SECDNS, 4))
			{
				document.wizard_form.PRIDNS.select();
				return false;
			}
	}
	else if (document.wizard_form.WAN_MODE[3].checked == true)	//PPPOE
	{ 
		if (document.wizard_form.PPPOE_USER.value.length == 0)
		{
			alert(_("err name empty"));
			document.wizard_form.PPPOE_USER.select();
			return false;
		}
		if(!Checkhanzi(document.wizard_form.PPPOE_USER.value))
		{
			alert(_("err user"));
			document.wizard_form.PPPOE_USER.select();
			return false;
		}
		if (document.wizard_form.PPPOE_PWD.value.length == 0)
		{
			alert(_("err pwd empty"));
			document.wizard_form.PPPOE_PWD.select();
			return false;
		}
		if (!Checkhanzi(document.wizard_form.PPPOE_PWD.value))
		{
			alert(_("err pwd"));
			document.wizard_form.PPPOE_PWD.select();
			return false;
		}

		if (pppoecdb != "1")
		{
			if (document.wizard_form.PPPOE_MODE.selectedIndex == 1)
			{
				if (document.wizard_form.PPPOE_DEMAND.value == "")
				{
					alert(_("err sRP"));
					document.wizard_form.PPPOE_DEMAND.select();
					return false;
				}
				if (!isNum(document.wizard_form.PPPOE_DEMAND.value))
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_DEMAND.select();
					return false;
				}
			}
			else if (document.wizard_form.PPPOE_MODE.selectedIndex == 2)
			{
				if (document.wizard_form.PPPOE_MANUAL.value == "")
				{
					alert(_("err sIT"));
					document.wizard_form.PPPOE_MANUAL.select();
					return false;
				}
				if (!isNum(document.wizard_form.PPPOE_MANUAL.value))
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_MANUAL.select();
					return false;
				}

			}
			else if (document.wizard_form.PPPOE_MODE.selectedIndex == 3)
			{
				if (checktimerange(document.wizard_form.PPPOE_TIMING_BH.value,0,24)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_BH.select();
					return false;
				}
				if (checktimerange(document.wizard_form.PPPOE_TIMING_BM.value,0,59)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_BM.select();
					return false;
				}
				if (checktimerange(document.wizard_form.PPPOE_TIMING_EH.value,0,24)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_EH.select();
					return false;
				}
				if (checktimerange(document.wizard_form.PPPOE_TIMING_EM.value,0,59)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_EM.select();
					return false;
				}
				
				
			}
		}
	}
	else if (document.wizard_form.WAN_MODE[4].checked == true) 	//L2TP
	{ 
		if (!checkIpAddr(document.wizard_form.l2tpServer, 1))
		{
			document.wizard_form.l2tpServer.select();
			return false;
		}
		if (document.wizard_form.l2tpUser.value.length == 0)
		{
			alert(_("err name empty"));
			document.wizard_form.l2tpUser.select();
			return false;
		}
		if (document.wizard_form.l2tpPass.value.length == 0)
		{
			alert(_("err pwd empty"));
			document.wizard_form.l2tpPass.select();
			return false;
		}
		if (document.wizard_form.l2tpMode.selectedIndex == 0)
		{
			if (!checkIpAddr(document.wizard_form.l2tpIp, 1))
			{
				document.wizard_form.WAN_IPADDR.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.l2tpNetmask, 2))
			{
				document.wizard_form.l2tpNetmask.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.l2tpGateway, 3))
			{
				document.wizard_form.l2tpGateway.select();
				return false;
			}
		}
		if (document.wizard_form.l2tpOPMode.selectedIndex == 0)
		{
			if (document.wizard_form.l2tpRedialPeriod.value == "")
			{
				alert(_("err sRP"));
				document.wizard_form.l2tpRedialPeriod.select();
				return false;
			}
		}
		/*
		else if (document.wizard_form.l2tpOPMode.selectedIndex == 1)
		{
			if (document.wizard_form.l2tpIdleTime.value == "")
			{
				alert("Please specify Idle Time");
				document.wizard_form.l2tpIdleTime.focus();
				document.wizard_form.l2tpIdleTime.select();
				return false;
			}
		}
		*/
	}
	else if (document.wizard_form.WAN_MODE[5].checked == true) 	//PPTP
	{ 
		if (!checkIpAddr(document.wizard_form.pptpServer, 1))
		{
			document.wizard_form.pptpServer.select();
			return false;
		}
		if (document.wizard_form.pptpUser.value.length == 0)
		{
			alert(_("err name empty"));
			document.wizard_form.pptpUser.select();
			return false;
		}
		if (document.wizard_form.pptpPass.value.length == 0)
		{
			alert(_("err pwd empty"));
			document.wizard_form.pptpPass.select();
			return false;
		}
		if (document.wizard_form.pptpMode.selectedIndex == 0) 
		{
			if (!checkIpAddr(document.wizard_form.pptpIp, 1))
			{
				document.wizard_form.pptpIp.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.pptpNetmask, 2))
			{
				document.wizard_form.pptpNetmask.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.pptpGateway, 3))
			{
				document.wizard_form.pptpGateway.select();
				return false;
			}
		}
		if (document.wizard_form.pptpOPMode.selectedIndex == 0)
		{
			if (document.wizard_form.pptpRedialPeriod.value == "")
			{
				alert(_("err sRP"));
				document.wizard_form.pptpRedialPeriod.select();
				return false;
			}
		}
		/*
		else if(document.wizard_form.pptpOPMode.selectedIndex == 1)
		{
			if (document.wizard_form.pptpIdleTime.value == "")
			{
				alert("Please specify Idle Time");
				document.wizard_form.pptpIdleTime.select();
				return false;
			}
		}
		*/
	}

	return true;
}

function initTranslation()
{
	var e = document.getElementById("qsettitle");
	e.innerHTML = _("admw w2title");
	e = document.getElementById("modedes");
	e.innerHTML = _("admw modedes");

	e = document.getElementById("STIP_title");
	e.innerHTML = _("admw STIP_title");
	e = document.getElementById("PPP_title");
	e.innerHTML = _("admw PPP_title");

	e = document.getElementById("AutoMode");
	e.innerHTML = _("admw AutoMode");
	e = document.getElementById("Autodisc");
	e.innerHTML = _("admw Autodisc");
	e = document.getElementById("DHCPac");
	e.innerHTML = _("admw DHCP");
	e = document.getElementById("DHCPdisc");
	e.innerHTML = _("admw DHCPdisc");
	e = document.getElementById("SM");
	e.innerHTML = _("admw SM");
	e = document.getElementById("SMdisc");
	e.innerHTML = _("admw SMdisc");
	e = document.getElementById("PPPOE");
	e.innerHTML = _("admw PPPOE");
	e = document.getElementById("PPPOEdisc");
	e.innerHTML = _("admw PPPOEdisc");
	e = document.getElementById("L2TPc");
	e.innerHTML = _("admw L2TPc");
	e = document.getElementById("PPTPc");
	e.innerHTML = _("admw PPTPc");

	e = document.getElementById("SMD");
	e.innerHTML = _("admw SMD");
	e = document.getElementById("IPA");
	e.innerHTML = _("admw IPA");
	e = document.getElementById("SubMask");
	e.innerHTML = _("admw SubMask");
	e = document.getElementById("defgw");
	e.innerHTML = _("admw defgw");
	e = document.getElementById("pDNSserver");
	e.innerHTML = _("admw pDNSserver");
	e = document.getElementById("sDNSserver");
	e.innerHTML = _("admw sDNSserver");

	e = document.getElementById("pppoemod");
	e.innerHTML = _("admw pppoemod");
	e = document.getElementById("uname");
	e.innerHTML = _("admw uname");
	e = document.getElementById("pword");
	e.innerHTML = _("admw pword");

	e = document.getElementById("opmope");
	e.innerHTML = _("admw opmope");

	
	e = document.getElementById("wPppoeKeepAlive");
	e.innerHTML = _("admw opmode keepalive");
	e = document.getElementById("wPppoeOnDemand");
	e.innerHTML = _("admw opmode ondemand");
	e = document.getElementById("wPppoeManual");
	e.innerHTML = _("admw opmode manual");
	e = document.getElementById("PPPOE_KAM");
	e.innerHTML = _("KAM");
	e = document.getElementById("PPPOE_seconds");
	e.innerHTML = _("minutes");
	e = document.getElementById("PPPOE_ODM");
	e.innerHTML = _("ODM");
	e = document.getElementById("PPPOE_minutes");
	e.innerHTML = _("minutes");

	e = document.getElementById("L2TPM");
	e.innerHTML = _("adminw L2TPM");
	e = document.getElementById("L2TPSIP");
	e.innerHTML = _("adminw L2TPSIP");
	e = document.getElementById("L2TPname");
	e.innerHTML = _("adminw L2TPname");
	e = document.getElementById("L2TPpwd");
	e.innerHTML = _("adminw L2TPpwd");
	e = document.getElementById("L2TPAM");
	e.innerHTML = _("adminw L2TPAM");
	e = document.getElementById("l2tpMs");
	e.innerHTML = _("adminw l2tpMs");
	e = document.getElementById("l2tpMd");
	e.innerHTML = _("adminw l2tpMd");
	e = document.getElementById("L2TP_IP");
	e.innerHTML = _("adminw L2TPIP");
	e = document.getElementById("L2TPSM");
	e.innerHTML = _("adminw L2TPSM");
	e = document.getElementById("L2TPDG");
	e.innerHTML = _("adminw L2TPDG");
	e = document.getElementById("L2TPOM");
	e.innerHTML = _("adminw L2TPOM");
	e = document.getElementById("L2TPka");
	e.innerHTML = _("adminw L2TPka");
	e = document.getElementById("L2TPMa");
	e.innerHTML = _("adminw L2TPMa");
	e = document.getElementById("L2TP_KAM");
	e.innerHTML = _("adminw L2TP_KAM");
	e = document.getElementById("L2TP_seconds");
	e.innerHTML = _("adminw L2TP_seconds");

	e = document.getElementById("PPM");
	e.innerHTML = _("adminw PPM");
	e = document.getElementById("PPSIP");
	e.innerHTML = _("adminw PPSIP");
	e = document.getElementById("PPuname");
	e.innerHTML = _("adminw PPuname");
	e = document.getElementById("PPpwd");
	e.innerHTML = _("adminw PPpwd");
	e = document.getElementById("PPAM");
	e.innerHTML = _("adminw PPAM");
	e = document.getElementById("PPS");
	e.innerHTML = _("adminw PPS");
	e = document.getElementById("PPD");
	e.innerHTML = _("adminw PPD");
	e = document.getElementById("PPIP");
	e.innerHTML = _("adminw PPIP");
	e = document.getElementById("PPSM");
	e.innerHTML = _("adminw PPSM");
	e = document.getElementById("PPDG");
	e.innerHTML = _("adminw PPDG");
	e = document.getElementById("PPOM");
	e.innerHTML = _("adminw PPOM");
	e = document.getElementById("PPKA");
	e.innerHTML = _("adminw PPKA");
	e = document.getElementById("PPma");
	e.innerHTML = _("adminw PPma");
	e = document.getElementById("PPtP_KAM");
	e.innerHTML = _("adminw PPtP_KAM");
	e = document.getElementById("PPtP_seconds");
	e.innerHTML = _("adminw PPtP_seconds");

	e = document.getElementById("bBACK");
	e.value = _("admw bBACK");
	e = document.getElementById("bNEXT");
	e.value = _("admw bNEXT");
	e = document.getElementById("bCANCEL");
	e.value = _("admw bCANCEL");
	e = document.getElementById("bAPPLY");
	e.value = _("admw bAPPLY");
	
	e = document.getElementById("otherbutton");
	e.value = _("admw otherbutton");
	e = document.getElementById("advbutton");
	e.value = _("admw advbutton");

	e = document.getElementById("pppshowp");
	e.innerHTML = _("admw showp");
	e = document.getElementById("l2tpshowp");
	e.innerHTML = _("admw showp");
	e = document.getElementById("p2tpshowp");
	e.innerHTML = _("admw showp");
	
	e = document.getElementById("optionXX");
	e.innerHTML = _("admw optionXX");
	
	e = document.getElementById("wPppoeTiming");
	e.innerHTML = _("admw opmode timing");
	e = document.getElementById("PPPOE_TIMING");
	e.innerHTML = _("admw PPPOE_TIMING");

	
}
function initValue()
{
	initTranslation();

	hideAllTables();
	disableWanSettings();
	step_num = 0;
	showothers = 0;
	showoadv = 0;
	if((document.getElementById("INDEX").value == "12") || (document.getElementById("INDEX").value == 12))
	{
		document.getElementById("INDEX").value = "99";
		var zidong = document.getElementById("AUTOTYPE").value;
		if(zidong == "static")
		{
			document.wizard_form.WAN_MODE[2].checked = true;
			setTimeout(function(){window.parent.DialogHide();alert(_("admw auto_sip"));},100);
			change_step(1);
		}
		else if(zidong == "dhcp")
		{
			document.wizard_form.WAN_MODE[1].checked = true;
			setTimeout(function(){window.parent.DialogHide();alert(_("admw auto_dhcp"));},100);
			change_step(1);
		}
		else if(zidong == "pppoe")
		{
			document.wizard_form.WAN_MODE[3].checked = true;
			setTimeout(function(){window.parent.DialogHide();alert(_("admw auto_ppp"));},100);
			change_step(1);
		}
		else if(zidong == "l2tp")
		{
			document.wizard_form.WAN_MODE[4].checked = true;
			setTimeout(function(){window.parent.DialogHide();alert(_("admw auto_l2tp"));},100);
			change_step(1);
		}
		else if(zidong == "p2tp")
		{
			document.wizard_form.WAN_MODE[5].checked = true;
			setTimeout(function(){window.parent.DialogHide();alert(_("admw auto_p2tp"));},100);
			change_step(1);
		}
		else
		{
			setTimeout(function(){window.parent.DialogHide();alert(_("admw auto_fail"));},100);
			document.getElementById("div_wan_opmode").style.visibility = "visible";
			document.getElementById("div_wan_opmode").style.display = style_display_on();
			document.getElementById("modedes").style.visibility = "visible";
			document.getElementById("modedes").style.display = style_display_on();

			butwork("true","false","true","true");
		}
		return true;
	}
	document.getElementById("div_wan_opmode").style.visibility = "visible";
	document.getElementById("div_wan_opmode").style.display = style_display_on();
	document.getElementById("modedes").style.visibility = "visible";
	document.getElementById("modedes").style.display = style_display_on();
	butwork("true","false","true","true");
}

function others() 
{
	if(showothers == 0)
	{
		document.getElementById("l2tptr1").style.visibility = "visible";
		document.getElementById("l2tptr1").style.display = style_display_on();
		document.getElementById("l2tptr2").style.visibility = "visible";
		document.getElementById("l2tptr2").style.display = style_display_on();
		document.getElementById("pptptr1").style.visibility = "visible";
		document.getElementById("pptptr1").style.display = style_display_on();
		document.getElementById("pptptr2").style.visibility = "visible";
		document.getElementById("pptptr2").style.display = style_display_on();
		showothers = 1;
	}
	else
	{
		document.getElementById("l2tptr1").style.visibility = "hidden";
		document.getElementById("l2tptr1").style.display = "none";
		document.getElementById("l2tptr2").style.visibility = "hidden";
		document.getElementById("l2tptr2").style.display = "none";
		document.getElementById("pptptr1").style.visibility = "hidden";
		document.getElementById("pptptr1").style.display = "none";
		document.getElementById("pptptr2").style.visibility = "hidden";
		document.getElementById("pptptr2").style.display = "none";
		showothers = 0;
	}
}

function advance() 
{
	if(showoadv == 0)
	{
		document.getElementById("div_pppoe_opmode").style.visibility = "visible";
		document.getElementById("div_pppoe_opmode").style.display = style_display_on();
		document.getElementById("div_pppoe_opmode_setting").style.visibility = "visible";
		document.getElementById("div_pppoe_opmode_setting").style.display = style_display_on();
		showoadv = 1;
		pppoeOPModeSwitch();
	}
	else
	{
		document.getElementById("div_pppoe_opmode").style.visibility = "hidden";
		document.getElementById("div_pppoe_opmode").style.display = "none";
		document.getElementById("div_pppoe_opmode_setting").style.visibility = "hidden";
		document.getElementById("div_pppoe_opmode_setting").style.display = "none";
		showoadv = 0;
	}
}
function pppshowpwd()
{
   var pass = document.getElementById("ppppass").value;
   
	if(document.getElementById("aaaa").checked == true)
	{
		document.getElementById("ppppwdinput").innerHTML='<input type="text" name="PPPOE_PWD" id="ppppass" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
	else
	{
		document.getElementById("ppppwdinput").innerHTML='<input type="password" name="PPPOE_PWD" id="ppppass" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
}
 function l2tpshowpwd()
{
	var pass = document.getElementById("l2tppass").value;

	if(document.getElementById("bbbb").checked == true)
	{
		document.getElementById("pl2tppwdinput").innerHTML='<input type="text" name="l2tpPass" id="l2tppass" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
	}
	else
	{
		document.getElementById("pl2tppwdinput").innerHTML='<input type="password" name="l2tpPass" id="l2tppass" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
	}
}
 function p2tpshowpwd()
{
	var pass = document.getElementById("p2tppass").value;
	
	if(document.getElementById("cccc").checked == true)
	{
		document.getElementById("p2tppwdinput").innerHTML='<input type="text" name="pptpPass" id="p2tppass" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
	else
	{
		document.getElementById("p2tppwdinput").innerHTML='<input type="password" name="pptpPass" id="p2tppass" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
	}
}
 function waitgifshow()
{
	document.getElementById("buttontable").style.visibility = "hidden";
	document.getElementById("buttontable").style.display = "none";	
	window.parent.Demo( _("admw settingwaiting"));
}
function workoutgw()
{
	var myString=document.getElementById("WAN_IPADDR").value;	
	//ip地址
	var exp=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
	var reg = myString.match(exp);
	if(reg==null)
	{
		//document.getElementById("IPGW").value = "";
	}
	else
	{
		if(document.getElementById("IPGW").value=="")
		{
			var a = myString.lastIndexOf(".");
			var s;
			s = myString.substr(0, a); // 获取子字符串。
			document.getElementById("IPGW").value = s+".1";
		}
		if(document.getElementById("WAN_NETMASK").value=="")
		{
			document.getElementById("WAN_NETMASK").value = "255.255.255.0";
		}
		if(document.getElementById("PRIDNS").value=="")
		{
			document.getElementById("PRIDNS").value = "8.8.8.8";
		}

	}
}
</script>
</head>

<body onLoad="initValue()" oncontextmenu="window.event.returnValue=false" >
<div class="handaer_main">
<table  width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td>
<h1 id="qsettitle"></h1>
<p></p>
<form method=post name="wizard_form">
<!-- ============= Internet OP Mode ============= -->
<h2 id="modedes"></h2>
<table id="div_wan_opmode" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_1" type="radio" name="WAN_MODE" value="auto" checked>
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_1" id="AutoMode" ></label>
  </td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="Autodisc"></div></td>
</tr> 
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_2" type="radio" name="WAN_MODE" value="dhcp">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_2" id="DHCPac" onclick=""></label></td>
</tr>
<tr>
  <td><div style="margin-left: 43px;" id="DHCPdisc"></div></td>
</tr> 
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_3" type="radio" name="WAN_MODE" value="static">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_3" id="SM" onclick=""></label>
  </td>

</tr>
<tr>
  <td><div style="margin-left: 43px;" id="SMdisc"></div></td>
</tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_4" type="radio" name="WAN_MODE" value="pppoe">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_4" id="PPPOE" onclick=""></label>
  </td>
</tr>
<tr>
  <td><div style="margin-left: 43px;" id="PPPOEdisc"></div></td>
</tr>
<tr style="display:none">
  <td><input id="otherbutton" type="button" value="其他" class="handaer_small_button" onClick="others()" /></td>
</tr>
<tr id="l2tptr1" style="display:none">
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_5" type="radio" name="WAN_MODE" value="l2tp">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_5" onclick="">L2TP</label>
  </td>
</tr>
<tr id="l2tptr2" style="display:none">
  <td><div style="margin-left: 43px;" id="L2TPc"></div></td>
</tr>
<tr id="pptptr1" style="display:none">
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_6" type="radio" name="WAN_MODE" value="pptp">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_6" onclick="">PPTP</label>
  </td>
</tr>
<tr id="pptptr2" style="display:none">
  <td><div style="margin-left: 43px;" id="PPTPc"></div></td>
</tr>
<tr style="display:none">
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_7" type="radio" name="WAN_MODE" value="3g">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_7" onclick="">3G</label>
  </td>
</tr>
<tr style="display:none">
   <td><div style="margin-left: 43px;">3G Client</div></td>
</tr>
</table>

<!-- ================= STATIC Mode ================= -->
<h2 id="STIP_title"></h2>
<table id="div_wan_static" width="100%" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="SMD"></td>
</tr>
<tr>
  <td class="head" id="IPA"></td>
  <td><input name="WAN_IPADDR" id="WAN_IPADDR"  class="handaer_text_content" maxlength=15 value="~~WAN_IPADDR~"  onblur="workoutgw()"></td>
</tr>
<tr>
  <td class="head" id="SubMask"></td>
  <td><input name="WAN_NETMASK" id="WAN_NETMASK"  class="handaer_text_content" maxlength=15 value="~~WAN_NETMASK~">
  </td>
</tr>
<tr>
  <td class="head" id="defgw"></td>
  <td><input name="IPGW" id="IPGW"  class="handaer_text_content" maxlength=15 value="~~IPGW~">
  </td>
</tr>
<tr>
  <td class="head" id="pDNSserver"></td>
  <td><input name="PRIDNS" id="PRIDNS"  class="handaer_text_content" maxlength=15 value="~~PRIDNS~"></td>
</tr>
<tr>
  <td class="head" id="sDNSserver"></td>
  <td><input name="SECDNS"  class="handaer_text_content" maxlength=15 value="~~SECDNS~"/><span style="height:30px; line-height:30px; padding:5px;" id="optionXX"></span></td>
</tr>
</table>

<!-- ================= PPPOE Mode ================= -->
<h2 id="PPP_title"></h2>
<table id="div_wan_pppoe" width="100%" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="pppoemod"></td>
</tr>
<tr>
  <td class="head" id="uname"></td>
  <td><input name="PPPOE_USER"  class="handaer_text_content" style="ime-mode:disabled" maxlength=32 size=32 value="~~PPPOE_USER~"></td>
</tr>
<tr>
  <td class="head" id="pword"></td>
  <td><span id="ppppwdinput"><input type="password" id="ppppass" name="PPPOE_PWD" class="handaer_text_content" maxlength="32" size="32" value="~~PPPOE_PWD~"/></span>&nbsp;<input type="checkbox" id="aaaa" onClick="pppshowpwd()"/>&nbsp;<label for="aaaa" id="pppshowp"></label></td>
</tr>

<tr>
  <td><input id="advbutton" type="button"   class="handaer_small_button" onClick="advance()" /></td>
  <td>&nbsp; &nbsp;</td>
</tr>
<tr id="div_pppoe_opmode" style="display:none">
  <td class="head" rowspan="2" id="opmope"></td>
  <td>
    <select name="PPPOE_MODE" size="1" onChange="pppoeOPModeSwitch()">
      <option ~sPPPOE_MODE:auto~ value="auto" id="wPppoeKeepAlive"></option>
      <option ~sPPPOE_MODE:demand~ value="demand" id="wPppoeOnDemand"></option>
      <option ~sPPPOE_MODE:manual~ value="manual" id="wPppoeManual"></option>
      <option ~sPPPOE_MODE:timing~ value="timing" id="wPppoeTiming"></option>
    </select>
  </td>
</tr>
<tr id="div_pppoe_opmode_setting" style="display:none">
<td>
	<span id="hide1"><span id="PPPOE_KAM"></span><input type="text" style="ime-mode:disabled" name="PPPOE_DEMAND" class="handaer_text_small_content" maxlength="5" size="3" value="~~PPPOE_DEMAND~"/><span id="PPPOE_seconds"></span></br></span>
  	<span id="hide2"><span id="PPPOE_ODM"></span><input type="text" style="ime-mode:disabled" name="PPPOE_MANUAL" class="handaer_text_small_content" maxlength="3" size="2" value="~~PPPOE_MANUAL~"/><span id="PPPOE_minutes"></span></br></span>
	<span id="hide3"><span id="PPPOE_TIMING"></span>
	<input type="text" name="PPPOE_TIMING_BH" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_BH~"/>:
	<input type="text" name="PPPOE_TIMING_BM" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_BM~"/>-
	<input type="text" name="PPPOE_TIMING_EH" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_EH~"/>:
	<input type="text" name="PPPOE_TIMING_EM" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_EM~"/></span>
</td>
</tr>
</table>

<!-- ================= L2TP Mode ================= -->
<table id="div_wan_l2tp" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="L2TPM"></td>
</tr>
<tr>
  <td class="head" id="L2TPSIP"></td>
  <td><input name="l2tpServer"  class="handaer_text_content" maxlength="15" size=15 value="~~l2tpServer~"></td>
</tr>
<tr>
  <td class="head" id="L2TPname" ></td>
  <td><input name="l2tpUser"  class="handaer_text_content" maxlength="20" size=20 value="~~l2tpUser~"></td>
</tr>
<tr>
  <td class="head" id="L2TPpwd"></td>
  <td><span id="pl2tppwdinput"><input type="password" id="l2tppass" name="l2tpPass"  class="handaer_text_content" maxlength="32" size="32" value="~~l2tpPass~"/></span>&nbsp;<input type="checkbox" id="bbbb" onClick="l2tpshowpwd()"/>&nbsp;<label for="bbbb" id="l2tpshowp"></label></td>
</tr>
<tr>
  <td class="head" id="L2TPAM"></td>
  <td>
    <select name="l2tpMode" size="1" onChange="l2tpModeSwitch()">
      <option value="0" id="l2tpMs"></option>
      <option value="1" id="l2tpMd"></option>
    </select>
  </td>
</tr>
<tr id="div_l2tpIp">
  <td class="head" id="L2TP_IP"></td>
  <td><input name="l2tpIp"  class="handaer_text_content" maxlength=15 size=15 value="~~l2tpIp~"></td>
</tr>
<tr id="div_l2tpNetmask">
  <td class="head" id="L2TPSM"></td>
  <td><input name="l2tpNetmask"  class="handaer_text_content" maxlength=15 size=15 value="~~l2tpNetmask~"></td>
</tr>
<tr id="div_l2tpGateway">
  <td class="head" id="L2TPDG"></td>
  <td><input name="l2tpGateway"  class="handaer_text_content" maxlength=15 size=15 value="~~l2tpGateway~"></td>
</tr>
<tr>
  <td class="head" rowspan="3" id="L2TPOM"></td>
  <td>
    <select name="l2tpOPMode" size="1" onChange="l2tpOPModeSwitch()">
      <option value="KeepAlive" selected id="L2TPka"></option>
      <!--
      <option value="OnDemand" id="wL2tpOnDemand">On Demand</option>
      -->
      <option value="Manual" id="L2TPMa"></option>
    </select>
  </td>
</tr>
<tr>
  <td>
   <span id="L2TP_KAM"></span>
    <input type="text" name="l2tpRedialPeriod" maxlength="5" size="3" value="60">
    <span id="L2TP_seconds">
    <!--
    <br />
    On demand Mode:  Idle Time
    <input type="text" name="l2tpIdleTime" maxlength="3" size="2" value="5">
    minutes
    -->
  </span>
  </td>
</tr>
</table>

<!-- ================= PPTP Mode ================= -->
<table id="div_wan_pptp" width="100%" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="PPM"></td>
</tr>
<tr>
  <td class="head" id="PPSIP"></td>
  <td><input name="pptpServer"  class="handaer_text_content" maxlength="15" size=15 value="~~pptpServer~"></td>
</tr>
<tr>
  <td class="head" id="PPuname"></td>
  <td><input name="pptpUser"  class="handaer_text_content" maxlength="20" size=20 value="~~pptpUser~"></td>
</tr>
<tr>
  <td class="head" id="PPpwd"></td>
  <td><span id="p2tppwdinput"><input type="password" id="p2tppass" name="pptpPass"  class="handaer_text_content" maxlength="32" size="32" value="~~pptpPass~" /></span>&nbsp;<input type="checkbox" id="cccc" onClick="p2tpshowpwd()"/>&nbsp;<label for="cccc" id="p2tpshowp"></label></td>
</tr>
<tr>
  <td class="head" id="PPAM"></td>
  <td>
    <select name="pptpMode" size="1" onChange="pptpModeSwitch()">
      <option value="0" id="PPS"></option>
      <option value="1" id="PPD"></option>
    </select>
  </td>
</tr>
<tr id="div_pptpIp">
  <td class="head" id="PPIP"></td>
  <td><input name="pptpIp"  class="handaer_text_content" maxlength=15 size=15 value="~~pptpIp~"></td>
</tr>
<tr id="div_pptpNetmask">
  <td class="head" id="PPSM"></td>
  <td><input name="pptpNetmask"  class="handaer_text_content" maxlength=15 size=15 value="~~pptpNetmask~"></td>
</tr>
<tr id="div_pptpGateway">
  <td class="head" id="PPDG"></td>
  <td><input name="pptpGateway" class="handaer_text_content" maxlength=15 size=15 value="~~pptpGateway~"></td>
</tr>
<tr>
  <td class="head" rowspan="3" id="PPOM"></td>
  <td>
    <select name="pptpOPMode" size="1" onChange="pptpOPModeSwitch()">
      <option value="KeepAlive" id="PPKA" selected></option>
      <!--
      <option value="OnDemand" id="wPptpOnDemand">On Demand</option>
      -->
      <option value="Manual" id="PPma"></option>
    </select>
  </td>
</tr>
<tr>
  <td>
    <span id="PPtP_KAM"></span>
    <input type="text" name="pptpRedialPeriod" maxlength="5" size="3" value="60">
    <span id="PPtP_seconds">
    <!--
    <br />
    On demand Mode:  Idle Time
    <input type="text" name="pptpIdleTime" maxlength="3" size="2" value="5">
    minutes
    -->
    </span>
  </td>
</tr>
</table>

<!-- =========== 3G Modular =========== -->
<table id="div_wan_3G" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2"></td>
</tr>
<tr>
  <td class="head" rowspan="3">USB 3G modem</td>
  <td>
    <select name="Dev3G" size="1">
      <option value="MU-Q101">NU MU-Q101</option>
      <option value="HUAWEI-E169">HUAWEI E169</option>
      <option value="BandLuxe-C270">BandLuxe C270</option>
      <option value="OPTION-ICON225">OPTION ICON 225</option>
    </select>
  </td>
</tr>
</table>

<table width="540" cellpadding="2" cellspacing="1" id="buttontable">
<tr align="center">
  <td>
    <input type="button" name="back_motion" id="bBACK" class="handaer_input" value="Back" onClick="change_step(-1);">
    <input type="button" name="next_motion" id="bNEXT" class="handaer_input" value="Next" onClick="change_step(1);">
    <input type="button" name="cancel_motion" id="bCANCEL" class="handaer_input" value="Cancel" onClick="change_step(0);">
    <input type="button" name="apply_motion" id="bAPPLY"class="handaer_input" value="Apply" onClick="change_step(1);">
    <input type="submit" name="DHCP" id="DHCP" style="display:none" value="DHCP">
    <input type="submit" name="SIP" id="SIP" style="display:none" value="SIP">
    <input type="submit" name="PPP" id="PPP" style="display:none" value="PPP">
    <input type="submit" name="L2TP" id="L2TP" style="display:none" value="L2TP">
    <input type="submit" name="P2TP" id="P2TP" style="display:none" value="P2TP">
	
	<input type="text" style="display:none" name="AUTOTYPE" id="AUTOTYPE" size="20" maxlength="32" value="~~AUTOTYPE~">	
	<input type="text" style="display:none" name="INDEX" id="INDEX" value="~~INDEX~">
    <input type="button" name="AUTOGET" id="AUTOGET" style="display:none" value="AUTOGET" onClick="window.location.href='w2?INDEX=12'">
	<input type="text" style="display:none" name="AP_locatIP" id="AP_locatIP" size="20" maxlength="32" value="~~AP_IPADDR~">	

  </td>
</tr>
</table>
<!--/form-->


</td></tr></table>

</div>
</body>

</html>

