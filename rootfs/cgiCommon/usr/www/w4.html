<html>
<head>
<title>Wizard Internet Settings</title>
<link rel="stylesheet" href="/style/normal_ws.css" type="text/css">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="/lang/b28n.js"></script>
<script language="JavaScript" type="text/javascript">

function initTranslation()
{
	
	var e = document.getElementById("qsettitle");
	e.innerHTML = _("admw w4ttitle");
	e = document.getElementById("wirelessdes");
	e.innerHTML = _("admw wirelessdes");
	
	e = document.getElementById("RMd");
	e.innerHTML = _("admw RMd");
	e = document.getElementById("R_uname");
	e.innerHTML = _("admw R_uname");
	e = document.getElementById("R_pword");
	e.innerHTML = _("admw R_pword");
	e = document.getElementById("showp");
	e.innerHTML = _("admw showp");

	e = document.getElementById("bCANCEL");
	e.value = _("admw bCANCEL");
	e = document.getElementById("bAPPLY");
	e.value = _("admw bAPPLY");
	
	e = document.getElementById("fresh");
	e.value = _("admw fresh");
	e = document.getElementById("Wlisttitle1");
	e.innerHTML = _("admw Wlisttitle1");
	e = document.getElementById("Wlisttitle2");
	e.innerHTML = _("admw Wlisttitle2");
	e = document.getElementById("Wlisttitle3");
	e.innerHTML = _("admw Wlisttitle3");
	e = document.getElementById("waiting");
	e.innerHTML = _("admw waiting");	

}
function initValue()
{
	Butterlate.setTextDomain("admin");
	initTranslation();
	document.getElementById("gifshow").style.visibility = "hidden";
	document.getElementById("gifshow").style.display = "none";
	

}
function checkInjection(str)
{
	var len = str.length;
	for (var i=0; i<str.length; i++) {
		if ( str.charAt(i) == '\r' || str.charAt(i) == '\n'){
				return false;
		}else
	        continue;
	}
    return true;
}

function CheckWirelessValue()
{
	if (document.wizard_form.AP_SSID_2.value.length == 0)
	{
		alert(_("err SSID empty"));
		return false;
	}
	//var keyvalue = document.wizard_form.PSK_KEY_2.value;
	//if (keyvalue.length == 0)
	//{
	//	alert('Please input password!');
	//	return false;
	//}
	//if (keyvalue.length < 8)
	//{
	//	alert('Please input at least 8 character of password!');
	//	return false;
	//}
	//if(checkInjection(keyvalue) == false)
	//{
	//	alert('Invalid characters in Pass Phrase.');
	//	return false;
	//}
	document.getElementById('WIRRE').click();
	return true;
}
function reloadd()
{
	window.location.reload();
}
function showpwd()
{
 
 if(document.getElementById("pwd").type=="password"){
   var pass = document.getElementById("pwd").value;
   document.getElementById("pwdinput").innerHTML='<input type="text" name="PSK_KEY_2" id="pwd" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
  }
  else
  {
   var pass = document.getElementById("pwd").value;
   document.getElementById("pwdinput").innerHTML='<input type="password" name="PSK_KEY_2" id="pwd" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
   }
 }
function  WIFSwitch()
{
	var obj=document.getElementById("WFILIST");
	var index=obj.selectedIndex; //序号，取当前选中选项的序号
	
	var myString=obj.options[index].text;
	
	var a = myString.indexOf("(");
	var b = myString.indexOf(")(");
	var c = myString.lastIndexOf(")(");
	var d = myString.lastIndexOf(")");
	
	var s, ss, sss, ssss;                // 声明变量。
	
    s = myString.substr(0, a); // 获取子字符串。
    ss = myString.substr(a+1, b-a-1); // 获取子字符串。
	sss = myString.substr(b+2, c-b-2);
	ssss = myString.substr(c+2, d-c-2);
	
	document.getElementById("AP_SSID_2").value = s;//obj.options[index].text;
	document.getElementById("ROOTAP_MAC_2").value = ss;//obj.options[index].text;
	document.getElementById("WDS_CHAN").value = sss;//obj.options[index].text;
	document.getElementById("AP_SECMODE_2").value = ssss;//obj.options[index].text;
	
	if(ssss == "None")
	{
		document.wizard_form.PSK_KEY_2.disabled = true;
	}
	else
	{
		document.wizard_form.PSK_KEY_2.disabled = false;
	}
}
function refreshwds()
{
	document.getElementById("wirelessdes").style.visibility = "hidden";
	document.getElementById("wirelessdes").style.display = "none";
	document.getElementById("div_Router").style.visibility = "hidden";
	document.getElementById("div_Router").style.display = "none";
	document.getElementById("buttontable").style.visibility = "hidden";
	document.getElementById("buttontable").style.display = "none";
	document.getElementById("gifshow").style.visibility = "visible";
	document.getElementById("gifshow").style.display = style_display_on();
	document.getElementById('REFRESHWFi').click();

}
</script>

<LINK REL="stylesheet" HREF="/style/handaer.css" TYPE="text/css" media="all">
</head>

<body onLoad="initValue()">
<div class="handaer_main">
<table  width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td>
<h1 id="qsettitle"></h1>
<p></p>
<form method="post" name="wizard_form">
<!-- ============= Wizard Home Page ============= -->
<h2 id="wirelessdes"></h2>
<!-- ================= Router Mode ================= -->
<table id="div_Router" width="100%" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="RMd"></td>
</tr>
<tr>
  <td class="head" id="R_uname"></td>
  <td><input name="AP_SSID_2" id="AP_SSID_2" maxlength=32 size=32 class="handaer_text_content" value="~~AP_SSID_2~"></td>
</tr>
<tr>
  <td class="head">MAC</td>
  <td><input name="ROOTAP_MAC_2" id="ROOTAP_MAC_2" maxlength=32 size=32 class="handaer_text_content" value="~~ROOTAP_MAC_2~"></td>
</tr>
<tr>
  <td class="head" id="R_pword"></td>
  <td><span id="pwdinput"><input type="password" id="pwd" name="PSK_KEY_2" maxlength="32" size="32" class="handaer_text_content" value="~~PSK_KEY_2~" /></span><input type="checkbox" onClick="showpwd()"/><span id="showp"></span></td>
</tr>
<tr>
    <td id="Wlisttitle1"></td>
    <td id="Wlisttitle2"></td>
  </tr>
  <tr>
	<td id="Wlisttitle3"></td>
    <td><select name="WFILIST" id="WFILIST" size="1" onclick="WIFSwitch()">
	~LList~</select>
	</td>
 </tr>
 <tr>
    <td>&nbsp; &nbsp;</td>
    <td><input type="button" name="refresh" id="fresh" class="handaer_input" value="Fresh" onClick="window.location.href='w4?INDEX=11'"></td>
    <!--td><input type="button" name="refresh" id="fresh" value="Fresh" onClick="refreshwds()"></td-->
 </tr>
</table>

<div id="gifshow" style="display:none" align="center">

  <img align="center" src="/images/loading.gif"></img>
  <p align="center" id="waiting"></p>

</div>

<table cellpadding="2" cellspacing="1" id="buttontable">
<tr align="center">
  <td>
    <input type="button" name="cancel_motion" id="bCANCEL" class="handaer_input" value="Cancel" onClick="reloadd();">
    <input type="button" name="apply_motion" id="bAPPLY" class="handaer_input" value="Apply" onClick="CheckWirelessValue();">
	<input type="submit" name="WIRRE" id="WIRRE" style="display:none" value="WIRRE">
	<input type="text" style="display:none" name="INDEX" id="INDEX" value="~~INDEX~">
	<input type="text" style="display:none" name="WDS_CHAN" id="WDS_CHAN" size="20" maxlength="32" value="~~WDS_CHAN~">	
	<input type="text" style="display:none" name="AP_SECMODE_2" id="AP_SECMODE_2" size="20" maxlength="32" value="~~AP_SECMODE_2~">	
  </td>
</tr>
</table>
<!--/form-->
<div style="display:none">    
	<input type="button" name="REFRESHWFi" id="REFRESHWFi" style="display:none" value="REFRESHWFi" onClick="window.location.href='w4?INDEX=11'">
	
</div>
</td></tr></table></div>
</body>

</html>

