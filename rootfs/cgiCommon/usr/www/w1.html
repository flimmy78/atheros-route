<html>
<head>
<title>Wizard Internet Settings</title>
<LINK REL="stylesheet" HREF="/style/handaer.css" TYPE="text/css" media="all">
<link rel="stylesheet" href="/style/normal_ws.css" type="text/css">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="/lang/b28n.js"></script>
<script language="JavaScript" type="text/javascript" src="/style/basic.js"></script>
<script language="JavaScript" type="text/javascript" src="/style/load.js"></script>
<script language="JavaScript" type="text/javascript">
if(getCookie()){}
else{window.top.location.href="../login.html";}

var step_num;
var pppoecdb = "0";
var showothers;
var showoadv0;
var linework;


function disableunneedSettings()
{
	document.wizard_form.AP_locatIP.disabled = true;
}
function butwork(zhi1,zhi2,zhi3,zhi4)
{
	if(zhi1 == "false")
	{widget_display("bBACK");}
	else
	{widget_hide("bBACK");	}
	
	if(zhi2 == "false")
	{widget_display("bNEXT");}
	else
	{widget_hide("bNEXT");}

	if(zhi3 == "false")
	{widget_display("bCANCEL");}
	else
	{widget_hide("bCANCEL");}

	if(zhi4 == "false")
	{widget_display("bAPPLY");}
	else
	{widget_hide("bAPPLY");}
}

var xmlHttp;
function wan_check()
{
	xmlHttp=GetXmlHttpObject();
	if (xmlHttp==null)
	{
		alert ("Browser does not support HTTP Request");
		Return;
	}
	var url="/cgi-bin/wan_check.cgi";
	url=url+"?sid="+Math.random();
	xmlHttp.onreadystatechange=stateChanged;
	xmlHttp.open("GET",url,true);
	xmlHttp.send(null);
}

function stateChanged()
{
	if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
	{
		if(xmlHttp.status==200)
		{
			window.parent.DialogHide();
			//alert(xmlHttp.responseText);
			var zidong = xmlHttp.responseText;
			
			if(zidong.indexOf("static") >= 0 )
			{
				document.wizard_form.WAN_MODE[2].checked = true;
				alert(_("admw auto_sip"));
				hideAllTables();
				connectionTypeSwitch();
				butwork("false","false","true","true");			
			}
			else if(zidong.indexOf("dhcp") >= 0)
			{
				document.wizard_form.WAN_MODE[1].checked = true;
				alert(_("admw auto_dhcp"));
				//hideAllTables();
				//connectionTypeSwitch();
				//butwork("false","false","true","true");
				change_step(1);				
			}
			else if(zidong.indexOf("pppoe") >= 0)
			{
				document.wizard_form.WAN_MODE[3].checked = true;
				alert(_("admw auto_ppp"));
				hideAllTables();
				connectionTypeSwitch();
				butwork("false","false","true","true");			
			}
			else if(zidong.indexOf("l2tp") >= 0)
			{
				document.wizard_form.WAN_MODE[5].checked = true;
				alert(_("admw auto_l2tp"));
				hideAllTables();
				connectionTypeSwitch();
				butwork("false","false","true","true");			
			}
			else if(zidong.indexOf("p2tp") >= 0)
			{
				document.wizard_form.WAN_MODE[6].checked = true;
				hideAllTables();
				connectionTypeSwitch();
				butwork("false","false","true","true");			
				alert(_("admw auto_p2tp"));
			}
			else
			{
				alert(_("admw auto_fail"));
				widget_display("div_wan_title");
				widget_display("div_wan_opmode");
				butwork("true","false","true","true");
				change_step(0);
			}
		}		
	}
}
function GetXmlHttpObject()
{
	var xmlHttp=null;
	try	{xmlHttp=new XMLHttpRequest();}catch (e){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");}catch (e){xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}}
	return xmlHttp;
}
function change_step(offset)
{
	if (offset == 1)
	{
		if(step_num == 2)
		{
			if (!CheckWanValue())
				return false;

		}
		if (step_num == 3)
		{
			if (!CheckWirelessValue())
				return false;
		}
	}
	//hideAllTables();
	if (offset == 0)
		step_num = offset;
	else
		step_num += offset;

	if (step_num == 0)
	{
		hideAllTables();
		widget_display("div_int_title");
		widget_display("div_int_opmode");
		butwork("true","false","true","true");		
	}
	else if (step_num == 1)
	{

		if (document.wizard_form.INT_MODE[0].checked == true) 
		{
			hideAllTables();
			widget_display("div_wan_title");
			widget_display("div_wan_opmode");
			butwork("false","false","true","true");			
		}
		else if (document.wizard_form.INT_MODE[1].checked == true) 
		{
			window.location.href="w1_wds";
		}
	}
	else if (step_num == 2)
	{
		if (document.wizard_form.INT_MODE[0].checked == true) 
		{
			if (document.wizard_form.WAN_MODE[0].checked == true) 
			{
				window.parent.Demo(_("admw waiting"));
				wan_check();
			}
			else if (document.wizard_form.WAN_MODE[1].checked == true) 
			{
				if (offset == 1)
					change_step(1);
				else if (offset == -1)
					change_step(-1);
			}
			else if (document.wizard_form.WAN_MODE[4].checked == true) 
			{
				if (offset == 1)
					change_step(1);
				else if (offset == -1)
					change_step(-1);
			}
			else
			{
				hideAllTables();
				connectionTypeSwitch();
				butwork("false","false","true","true");
			}
		}
		else if (document.wizard_form.INT_MODE[1].checked == true) 
		{
		
		}
	}
	else if (step_num == 3)
	{
		if (document.wizard_form.INT_MODE[0].checked == true) 
		{
			hideAllTables();
			widget_display("div_wireless_title");
			widget_display("div_wireless");
			widget_display("div_wireless1");
			widget_display("div_wireless2");
			document.wizard_form.AP_SSID.disabled = false;
			document.wizard_form.AP_SSID_3.disabled = false;
			switch_security_mode();
			switch_security_mode2();
			WIFI_HS();
			butwork("false","true","true","false");
		}
		else if (document.wizard_form.INT_MODE[1].checked == true) 
		{
		
		}
	}
	else if (step_num == 4)
	{
		if (document.wizard_form.INT_MODE[0].checked == true) 
		{
			if (document.wizard_form.WAN_MODE[1].checked == true) 
			{
				waitgifshow();
				disableunneedSettings();
				button_commit('DHCPW');
			}
			else if (document.wizard_form.WAN_MODE[2].checked == true) 
			{
				waitgifshow();
				disableunneedSettings();
				button_commit('SIPW');
			}
			else if (document.wizard_form.WAN_MODE[3].checked == true) 
			{
				waitgifshow();
				disableunneedSettings();
				//window.parent.pppoe_tiaozhuan();
				button_commit('PPPW');
			}
			else if (document.wizard_form.WAN_MODE[4].checked == true) 
			{
				waitgifshow();
				disableunneedSettings();
				button_commit('DISABLEW_WAN');
			}
			else if (document.wizard_form.WAN_MODE[5].checked == true) 
			{
				waitgifshow();
				disableunneedSettings();
				button_commit('L2TPW');
			}
			else if (document.wizard_form.WAN_MODE[6].checked == true) 
			{
				waitgifshow();
				disableunneedSettings();
				button_commit('P2TPW');
			}
			else 
			{
				alert("typeerror");
			}
			widget_hide("buttontable");	
		}
		else if (document.wizard_form.INT_MODE[1].checked == true) 
		{
		
		}
	}
	else
	{
		window.location.href="w1";
	}
	window.parent.iFrameHeight();
	return true;
}

function hideAllTables()
{
	widget_hide("div_int_title");
	widget_hide("div_int_opmode");
	widget_hide("div_wan_title");
	widget_hide("div_wan_opmode");
	hideWanOption();
	hideWirelessOption();
	hideWDSOption();
}
function hideWDSOption()
{

}
function hideWirelessOption()
{
	widget_hide("div_wireless_title");
	widget_hide("div_wireless");
	widget_hide("div_wireless1");
	widget_hide("div_wireless2");
}
function hideWanOption()
{
	widget_hide("STIP_title");
	widget_hide("div_wan_static");
	widget_hide("PPP_title");
	widget_hide("div_wan_pppoe");
	widget_hide("div_wan_l2tp");
	widget_hide("div_wan_pptp");
	widget_hide("div_wan_3G");
}

function disableWanSettings()
{
	document.wizard_form.WAN_IPADDR.disabled = true;
	document.wizard_form.WAN_NETMASK.disabled = true;
	document.wizard_form.IPGW.disabled = true;
	document.wizard_form.PRIDNS.disabled = true;
	document.wizard_form.SECDNS.disabled = true;
	document.wizard_form.PPPOE_USER.disabled = true;
	document.wizard_form.PPPOE_PWD.disabled = true;
	document.wizard_form.PPPOE_MODE.disabled = true;
	document.wizard_form.PPPOE_DEMAND.disabled = true;
	document.wizard_form.PPPOE_MANUAL.disabled = true;
	document.wizard_form.PPPOE_TIMING_BH.disabled = true;
	document.wizard_form.PPPOE_TIMING_BM.disabled = true;
	document.wizard_form.PPPOE_TIMING_EH.disabled = true;
	document.wizard_form.PPPOE_TIMING_EM.disabled = true;

	document.wizard_form.l2tpServer.disabled = true;
	document.wizard_form.l2tpUser.disabled = true;
	document.wizard_form.l2tpPass.disabled = true;
	document.wizard_form.l2tpMode.disabled = true;
	document.wizard_form.l2tpIp.disabled = true;
	document.wizard_form.l2tpNetmask.disabled = true;
	document.wizard_form.l2tpGateway.disabled = true;
	document.wizard_form.l2tpOPMode.disabled = true;
	document.wizard_form.l2tpRedialPeriod.disabled = true;
	document.wizard_form.pptpServer.disabled = true;
	document.wizard_form.pptpUser.disabled = true;
	document.wizard_form.pptpPass.disabled = true;
	document.wizard_form.pptpMode.disabled = true;
	document.wizard_form.pptpIp.disabled = true;
	document.wizard_form.pptpNetmask.disabled = true;
	document.wizard_form.pptpGateway.disabled = true;
	document.wizard_form.pptpOPMode.disabled = true;
	document.wizard_form.pptpRedialPeriod.disabled = true;
	document.wizard_form.Dev3G.disabled = true;
}

function disableWirelessSettings()
{
	document.wizard_form.AP_SSID.disabled = true;
	document.wizard_form.PSK_KEY.disabled = true;
	document.wizard_form.AP_SSID_3.disabled = true;
	document.wizard_form.PSK_KEY_3.disabled = true;
}

function connectionTypeSwitch()
{
	hideWanOption();
	if (document.wizard_form.WAN_MODE[2].checked == true) 
	{
		widget_display("STIP_title");
		widget_display("div_wan_static");

		document.wizard_form.WAN_IPADDR.disabled = false;
		document.wizard_form.WAN_NETMASK.disabled = false;
		document.wizard_form.IPGW.disabled = false;
		document.wizard_form.PRIDNS.disabled = false;
		document.wizard_form.SECDNS.disabled = false;
	}
	else if (document.wizard_form.WAN_MODE[3].checked == true) 
	{
	
		widget_display("PPP_title");
		widget_display("div_wan_pppoe");
		document.wizard_form.PPPOE_USER.disabled = false;
		document.wizard_form.PPPOE_PWD.disabled = false;

		if (pppoecdb == "1")
		{
			widget_hide("div_pppoe_opmode");
		}
		else 
		{
			document.wizard_form.PPPOE_MODE.disabled = false;
		}
	}
	else if (document.wizard_form.WAN_MODE[5].checked == true) 
	{
		widget_display("div_wan_l2tp");
		document.wizard_form.l2tpServer.disabled = false;
		document.wizard_form.l2tpUser.disabled = false;
		document.wizard_form.l2tpPass.disabled = false;
		document.wizard_form.l2tpMode.disabled = false;
		document.wizard_form.l2tpIp.disabled = false;
		document.wizard_form.l2tpNetmask.disabled = false;
		document.wizard_form.l2tpGateway.disabled = false;
		document.wizard_form.l2tpOPMode.disabled = false;
		l2tpOPModeSwitch();
	}
	else if (document.wizard_form.WAN_MODE[6].checked == true) 
	{
		widget_display("div_wan_pptp");
		document.wizard_form.pptpServer.disabled = false;
		document.wizard_form.pptpUser.disabled = false;
		document.wizard_form.pptpPass.disabled = false;
		document.wizard_form.pptpMode.disabled = false;
		document.wizard_form.pptpIp.disabled = false;
		document.wizard_form.pptpNetmask.disabled = false;
		document.wizard_form.pptpGateway.disabled = false;
		document.wizard_form.pptpOPMode.disabled = false;
		pptpOPModeSwitch();
	}
	else if (document.wizard_form.WAN_MODE[7].checked == true) 
	{
		widget_display("div_wan_3G");
		document.wizard_form.Dev3G.disabled = false;
	}
}

function switch_security_mode()
{
	if(document.wizard_form.WIFION_OFF[0].checked == true)
	{
		widget_display("div_security_key");
		document.wizard_form.PSK_KEY.disabled = false;
		if (document.wizard_form.AP_SECMODE.selectedIndex != 0)
		{
			widget_hide("div_security_key");
			document.wizard_form.PSK_KEY.disabled = true;
		}
	}
	window.parent.iFrameHeight();
}

function switch_security_mode2()
{
	if(document.wizard_form.WIFION_OFF_3[0].checked == true)
	{
		widget_display("div_security_key2");
		document.wizard_form.PSK_KEY_3.disabled = false;
		if (document.wizard_form.AP_SECMODE_3.selectedIndex != 0)
		{
			widget_hide("div_security_key2");
			document.wizard_form.PSK_KEY_3.disabled = true;
		}
	}
	window.parent.iFrameHeight();
}

function l2tpModeSwitch()
{
	if (document.wizard_form.l2tpMode.selectedIndex == 0) 
	{
		widget_display("div_l2tpIp");
		widget_display("div_l2tpNetmask");
		widget_display("div_l2tpGateway");
	}
	else 
	{
		widget_hide("div_l2tpIp");
		widget_hide("div_l2tpNetmask");
		widget_hide("div_l2tpGateway");
	}
}

function pptpModeSwitch()
{
	if (document.wizard_form.pptpMode.selectedIndex == 0) 
	{
		widget_display("div_pptpIp");
		widget_display("div_pptpNetmask");
		widget_display("div_pptpGateway");
	}
	else 
	{
		widget_hide("div_pptpIp");
		widget_hide("div_pptpNetmask");
		widget_hide("div_pptpGateway");
	}
}

function pppoeOPModeSwitch()
{
	document.wizard_form.PPPOE_DEMAND.disabled = true;
	document.wizard_form.PPPOE_MANUAL.disabled = true;
	
	document.wizard_form.PPPOE_TIMING_BH.disabled = true;
	document.wizard_form.PPPOE_TIMING_BM.disabled = true;
	document.wizard_form.PPPOE_TIMING_EH.disabled = true;
	document.wizard_form.PPPOE_TIMING_EM.disabled = true;
	
	widget_hide("div_pppoe_opmode_setting");	
	widget_hide("hide1");	
	widget_hide("hide2");	
	widget_hide("hide3");
	
	if (pppoecdb == "1")
	{
		widget_hide("div_pppoe_opmode_setting");
	}
	else
	{
		if (document.wizard_form.PPPOE_MODE.selectedIndex == 1) 
		{
			widget_display("div_pppoe_opmode_setting");	
			widget_display("hide1");	
			document.wizard_form.PPPOE_DEMAND.disabled = false;
		}
		else if (document.wizard_form.PPPOE_MODE.selectedIndex == 2)
		{
			widget_display("div_pppoe_opmode_setting");	
			widget_display("hide2");	
			document.wizard_form.PPPOE_MANUAL.disabled = false;
		}
		else if (document.wizard_form.PPPOE_MODE.selectedIndex == 3)
		{
			widget_display("div_pppoe_opmode_setting");	
			widget_display("hide3");	
			document.wizard_form.PPPOE_TIMING_BH.disabled = false;
			document.wizard_form.PPPOE_TIMING_BM.disabled = false;
			document.wizard_form.PPPOE_TIMING_EH.disabled = false;
			document.wizard_form.PPPOE_TIMING_EM.disabled = false;
		}
	}
}

function l2tpOPModeSwitch()
{
	document.wizard_form.l2tpRedialPeriod.disabled = true;
	// document.wizard_form.l2tpIdleTime.disabled = true;
	if (document.wizard_form.l2tpOPMode.selectedIndex == 0) 
		document.wizard_form.l2tpRedialPeriod.disabled = false;
	/*
	else if (document.wizard_form.l2tpOPMode.selectedIndex == 1)
		document.wizard_form.l2tpIdleTime.disabled = false;
	*/
}

function pptpOPModeSwitch()
{
	document.wizard_form.pptpRedialPeriod.disabled = true;
	// document.wizard_form.pptpIdleTime.disabled = true;
	if (document.wizard_form.pptpOPMode.selectedIndex == 0) 
		document.wizard_form.pptpRedialPeriod.disabled = false;
	/*
	else if (document.wizard_form.pptpOPMode.selectedIndex == 1)
		document.wizard_form.pptpIdleTime.disabled = false;
	*/
}


function CheckWanValue()
{
	if (document.wizard_form.WAN_MODE[2].checked == true)		//STATIC
	{      
		if (!checkIpAddr(document.wizard_form.WAN_IPADDR, 1))
		{
			document.wizard_form.WAN_IPADDR.select();
			return false;
		}
		{
			var myString1=document.wizard_form.WAN_IPADDR.value;//obj.options[index].text;
			var myString2=document.wizard_form.AP_locatIP.value;//obj.options[index].text;
			var a = myString1.lastIndexOf(".");
			var b = myString2.lastIndexOf(".");

			var s, ss;
	
			s = myString1.substr(0, a); // 获取子字符串。
			ss = myString2.substr(0, b); 
			if(s == ss)
			{
				alert(_("err IP error"));
				return false;
			}
		
		}
		if (!checkIpAddr(document.wizard_form.WAN_NETMASK, 2))
		{
			document.wizard_form.WAN_NETMASK.select();
			return false;
		}

		if (document.wizard_form.IPGW.value != "")
			if (!checkIpAddr(document.wizard_form.IPGW, 3))
			{
				document.wizard_form.IPGW.select();
				return false;
			}
		if (document.wizard_form.PRIDNS.value != "")
			if (!checkIpAddr(document.wizard_form.PRIDNS, 4))
			{
				document.wizard_form.PRIDNS.select();
				return false;
			}
		if (document.wizard_form.SECDNS.value != "")
			if (!checkIpAddr(document.wizard_form.SECDNS, 4))
			{
				document.wizard_form.PRIDNS.select();
				return false;
			}
	}
	else if (document.wizard_form.WAN_MODE[3].checked == true)	//PPPOE
	{ 
		if (document.wizard_form.PPPOE_USER.value.length == 0)
		{
			alert(_("err name empty"));
			document.wizard_form.PPPOE_USER.select();
			return false;
		}
		//if(!Checkhanzi(document.wizard_form.PPPOE_USER.value))
		//{
		//	alert(_("err user"));
		//	document.wizard_form.PPPOE_USER.select();
		//	return false;
		//}
		if (document.wizard_form.PPPOE_PWD.value.length == 0)
		{
			alert(_("err pwd empty"));
			document.wizard_form.PPPOE_PWD.select();
			return false;
		}
		//if (!Checkhanzi(document.wizard_form.PPPOE_PWD.value))
		//{
		//	alert(_("err pwd"));
		//	document.wizard_form.PPPOE_PWD.select();
		//	return false;
		//}
		if (pppoecdb != "1")
		{
			if (document.wizard_form.PPPOE_MODE.selectedIndex == 1)
			{
				if (document.wizard_form.PPPOE_DEMAND.value == "")
				{
					alert(_("err sRP"));
					document.wizard_form.PPPOE_DEMAND.select();
					return false;
				}
				if (!isNum(document.wizard_form.PPPOE_DEMAND.value))
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_DEMAND.select();
					return false;
				}

			}
			else if (document.wizard_form.PPPOE_MODE.selectedIndex == 2)
			{
				if (document.wizard_form.PPPOE_MANUAL.value == "")
				{
					alert(_("err sIT"));
					document.wizard_form.PPPOE_MANUAL.select();
					return false;
				}
				if (!isNum(document.wizard_form.PPPOE_MANUAL.value))
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_MANUAL.select();
					return false;
				}
			}
			else if (document.wizard_form.PPPOE_MODE.selectedIndex == 3)
			{
				if (checktimerange(document.wizard_form.PPPOE_TIMING_BH.value,0,23)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_BH.select();
					return false;
				}
				if (checktimerange(document.wizard_form.PPPOE_TIMING_BM.value,0,59)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_BM.select();
					return false;
				}
				if (checktimerange(document.wizard_form.PPPOE_TIMING_EH.value,0,23)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_EH.select();
					return false;
				}
				if (checktimerange(document.wizard_form.PPPOE_TIMING_EM.value,0,59)==false)
				{
					alert(_("err stiming"));
					document.wizard_form.PPPOE_TIMING_EM.select();
					return false;
				}
				
				
			}
		}
	}
	else if (document.wizard_form.WAN_MODE[5].checked == true) 	//L2TP
	{ 
		if (!checkIpAddr(document.wizard_form.l2tpServer, 1))
		{
			document.wizard_form.l2tpServer.select();
			return false;
		}
		if (document.wizard_form.l2tpUser.value.length == 0)
		{
			alert(_("err name empty"));
			document.wizard_form.l2tpUser.select();
			return false;
		}
		if (document.wizard_form.l2tpPass.value.length == 0)
		{
			alert(_("err pwd empty"));
			document.wizard_form.l2tpPass.select();
			return false;
		}
		if (document.wizard_form.l2tpMode.selectedIndex == 0)
		{
			if (!checkIpAddr(document.wizard_form.l2tpIp, 1))
			{
				document.wizard_form.WAN_IPADDR.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.l2tpNetmask, 2))
			{
				document.wizard_form.l2tpNetmask.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.l2tpGateway, 3))
			{
				document.wizard_form.l2tpGateway.select();
				return false;
			}
		}
		if (document.wizard_form.l2tpOPMode.selectedIndex == 0)
		{
			if (document.wizard_form.l2tpRedialPeriod.value == "")
			{
				alert(_("err sRP"));
				document.wizard_form.l2tpRedialPeriod.select();
				return false;
			}
		}
		/*
		else if (document.wizard_form.l2tpOPMode.selectedIndex == 1)
		{
			if (document.wizard_form.l2tpIdleTime.value == "")
			{
				alert("Please specify Idle Time");
				document.wizard_form.l2tpIdleTime.focus();
				document.wizard_form.l2tpIdleTime.select();
				return false;
			}
		}
		*/
	}
	else if (document.wizard_form.WAN_MODE[6].checked == true) 	//PPTP
	{ 
		if (!checkIpAddr(document.wizard_form.pptpServer, 1))
		{
			document.wizard_form.pptpServer.select();
			return false;
		}
		if (document.wizard_form.pptpUser.value.length == 0)
		{
			alert(_("err name empty"));
			document.wizard_form.pptpUser.select();
			return false;
		}
		if (document.wizard_form.pptpPass.value.length == 0)
		{
			alert(_("err pwd empty"));
			document.wizard_form.pptpPass.select();
			return false;
		}
		if (document.wizard_form.pptpMode.selectedIndex == 0) 
		{
			if (!checkIpAddr(document.wizard_form.pptpIp, 1))
			{
				document.wizard_form.pptpIp.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.pptpNetmask, 2))
			{
				document.wizard_form.pptpNetmask.select();
				return false;
			}
			if (!checkIpAddr(document.wizard_form.pptpGateway, 3))
			{
				document.wizard_form.pptpGateway.select();
				return false;
			}
		}
		if (document.wizard_form.pptpOPMode.selectedIndex == 0)
		{
			if (document.wizard_form.pptpRedialPeriod.value == "")
			{
				alert(_("err sRP"));
				document.wizard_form.pptpRedialPeriod.select();
				return false;
			}
		}
		/*
		else if(document.wizard_form.pptpOPMode.selectedIndex == 1)
		{
			if (document.wizard_form.pptpIdleTime.value == "")
			{
				alert("Please specify Idle Time");
				document.wizard_form.pptpIdleTime.select();
				return false;
			}
		}
		*/
	}

	return true;
}

function CheckWirelessValue()
{
	if(document.wizard_form.WIFION_OFF[0].checked == true)
	{
		/*if (document.wizard_form.AP_SSID.value.length == 0)
		{
			alert(_("err SSID empty"));
			document.wizard_form.AP_SSID.select();
			return false;
		}
		if (document.wizard_form.AP_SSID.value.length > 24 )
		{
			alert(_("err SSID length"));
			document.wizard_form.AP_SSID.select();
			return false;
		}
		if(!Checkformat(document.wizard_form.AP_SSID.value))
		{
			alert(_("err SSID"));
			document.wizard_form.AP_SSID.select();
			return false;
		}*/
		if(!CheckSSIDformat(document.wizard_form.AP_SSID.value))
		{
			alert(_("err SSIDformat"));
			document.wizard_form.AP_SSID.select();
			return false;
		}	
		if (document.wizard_form.AP_SECMODE.selectedIndex == 0)
		{
			var keyvalue = document.wizard_form.PSK_KEY.value;
			if (keyvalue.length == 0)
			{
				alert(_("err key"));
				document.wizard_form.PSK_KEY.select();
				return false;
			}
			if ((keyvalue.length < 8)||( keyvalue.length > 63))
			{
				alert(_("err keylen"));
				document.wizard_form.PSK_KEY.select();
				return false;
			}
			/*if(checkInjection(keyvalue) == false)
			{
				alert(_("err keychar"));
				document.wizard_form.PSK_KEY.select();
				return false;
			}
			*/
			{
				var xxx=keyvalue;  //用户名（在此赋值）

				var usern = /^[a-zA-Z0-9_]{1,}$/;
				if(!xxx.match(usern))   
				{   
					alert(_("err keychar"));
					document.wizard_form.PSK_KEY.select();
					return false;
				}   
			}
		}
	}
	else
	{
		document.wizard_form.AP_PRIMARY_CH.disabled = true;
		document.wizard_form.AP_SECMODE.disabled = true;
		document.getElementById("pwd").disabled = true;	   
	}
	
	if(document.wizard_form.WIFION_OFF_3[0].checked == true)
	{
		/*if (document.wizard_form.AP_SSID_3.value.length == 0)
		{
			alert(_("err SSID empty"));
			document.wizard_form.AP_SSID_3.select();
			return false;
		}
		if (document.wizard_form.AP_SSID_3.value.length > 24 )
		{
			alert(_("err SSID length"));
			document.wizard_form.AP_SSID_3.select();
			return false;
		}
		if(!Checkformat(document.wizard_form.AP_SSID_3.value))
		{
			alert(_("err SSID"));
			document.wizard_form.AP_SSID_3.select();
			return false;
		}*/
		if(!CheckSSIDformat(document.wizard_form.AP_SSID_3.value))
		{
			alert(_("err SSIDformat"));
			document.wizard_form.AP_SSID_3.select();
			return false;
		}	
		if (document.wizard_form.AP_SECMODE_3.selectedIndex == 0)
		{
			var keyvalue2 = document.wizard_form.PSK_KEY_3.value;
			if (keyvalue2.length == 0)
			{
				alert(_("err key"));
				document.wizard_form.PSK_KEY_3.select();
				return false;
			}
			if ((keyvalue2.length < 8)||( keyvalue2.length > 63))
			{
				alert(_("err keylen"));
				document.wizard_form.PSK_KEY_3.select();
				return false;
			}
			/*if(checkInjection(keyvalue) == false)
			{
				alert(_("err keychar"));
				document.wizard_form.PSK_KEY.select();
				return false;
			}
			*/
			{
				var xxx=keyvalue2;  //用户名（在此赋值）

				var usern = /^[a-zA-Z0-9_]{1,}$/;
				if(!xxx.match(usern))   
				{   
					alert(_("err keychar"));
					document.wizard_form.PSK_KEY_3.select();
					return false;
				}   
			}
			
		}
	}
	else
	{
		document.wizard_form.AP_PRIMARY_CH_3.disabled = true;
		document.wizard_form.AP_SECMODE_3.disabled = true;
		document.getElementById("pwd2").disabled = true;	   
	}
	return true;
}
function initTranslation()
{
	trans_inner("qsettitle","admw w1title");

	trans_inner("div_int_title","admw div_int_title");
	trans_inner("int_1des","admw int_1des");
	trans_inner("int_1disc","admw int_1disc");
	trans_inner("int_2des","admw int_2des");
	trans_inner("int_2disc","admw int_2disc");

	trans_inner("STIP_title","admw STIP_title");
	trans_inner("PPP_title","admw PPP_title");

	trans_inner("div_wan_title","admw div_wan_title");
	trans_inner("AutoMode","admw AutoMode");
	trans_inner("Autodisc","admw Autodisc");
	
	trans_inner("DHCP","admw DHCP");
	trans_inner("DHCPdisc","admw DHCPdisc");
	trans_inner("SM","admw SM");
	trans_inner("SMdisc","admw SMdisc");
	trans_inner("PPPOE","admw PPPOE");
	trans_inner("PPPOEdisc","admw PPPOEdisc");
	trans_inner("DISABLE_a","admw DISABLE_a");
	trans_inner("DISABLEdisc","admw DISABLEdisc");
	
	trans_inner("L2TPc","admw L2TPc");
	trans_inner("PPTPc","admw PPTPc");

	trans_inner("SMD","admw SMD");
	trans_inner("IPA","admw IPA");
	trans_inner("SubMask","admw SubMask");
	trans_inner("defgw","admw defgw");
	trans_inner("pDNSserver","admw pDNSserver");
	trans_inner("sDNSserver","admw sDNSserver");

	trans_inner("pppoemod","admw pppoemod");
	trans_inner("uname","admw uname");
	trans_inner("pword","admw pword");

	trans_inner("opmope","admw opmope");

	trans_inner("div_wireless_title","admw div_wireless_title");
	
	trans_inner("A_title","admw wsetingst");
	
	trans_inner("wsetingst","admw wsetingst1");
	trans_inner("nname","admw nname");
	trans_inner("security","admw security");
	trans_inner("wkey","admw wkey");
	
	trans_inner("wsetingst2","admw wsetingst2");
	trans_inner("nname2","admw nname");
	trans_inner("security2","admw security");
	trans_inner("wkey2","admw wkey");

	trans_inner("wPppoeKeepAlive","admw opmode keepalive");
	trans_inner("wPppoeOnDemand","admw opmode ondemand");
	trans_inner("wPppoeManual","admw opmode manual");
	trans_inner("PPPOE_KAM","KAM");
	trans_inner("PPPOE_seconds","minutes");
	trans_inner("PPPOE_ODM","ODM");
	trans_inner("PPPOE_minutes","minutes");
	
	trans_inner("Sdisable","admin open");
	trans_inner("Senable","admin jiami");

	trans_inner("Sdisable2","admin open");
	trans_inner("Senable2","admin jiami");
	trans_inner("L2TPM","adminw L2TPM");
	trans_inner("L2TPSIP","adminw L2TPSIP");
	trans_inner("L2TPname","adminw L2TPname");
	trans_inner("L2TPpwd","adminw L2TPpwd");
	trans_inner("L2TPAM","adminw L2TPAM");
	trans_inner("l2tpMs","adminw l2tpMs");
	trans_inner("l2tpMd","adminw l2tpMd");
	trans_inner("L2TP_IP","adminw L2TPIP");
	trans_inner("L2TPSM","adminw L2TPSM");
	trans_inner("L2TPDG","adminw L2TPDG");
	trans_inner("L2TPOM","adminw L2TPOM");
	trans_inner("L2TPka","adminw L2TPka");
	trans_inner("L2TPMa","adminw L2TPMa");
	trans_inner("L2TP_KAM","adminw L2TP_KAM");
	trans_inner("L2TP_seconds","adminw L2TP_seconds");

	trans_inner("PPM","adminw PPM");
	trans_inner("PPSIP","adminw PPSIP");
	trans_inner("PPuname","adminw PPuname");
	trans_inner("PPpwd","adminw PPpwd");
	trans_inner("PPAM","adminw PPAM");
	trans_inner("PPS","adminw PPS");
	trans_inner("PPD","adminw PPD");
	trans_inner("PPIP","adminw PPIP");
	trans_inner("PPSM","adminw PPSM");
	trans_inner("PPDG","adminw PPDG");
	trans_inner("PPOM","adminw PPOM");
	trans_inner("PPKA","adminw PPKA");
	trans_inner("PPma","adminw PPma");
	trans_inner("PPtP_KAM","adminw PPtP_KAM");
	trans_inner("PPtP_seconds","adminw PPtP_seconds");

	trans_value("bBACK","admw bBACK");
	trans_value("bNEXT","admw bNEXT");
	trans_value("bCANCEL","admw bCANCEL");
	trans_value("bAPPLY","admw bAPPLY");
	
	trans_value("otherbutton","admw otherbutton");
	//trans_value("advbutton","admw advbutton");
	
	trans_inner("pppshowp","admw showp");
	trans_inner("l2tpshowp","admw showp");
	trans_inner("p2tpshowp","admw showp");
	trans_inner("showp","admw showp");	
	
	trans_inner("optionXX","admw optionXX");
	
	trans_inner("wifionbutton","admw onbutton");	
	trans_inner("wifioffbutton","admw offbutton");	
	trans_inner("wifionbutton2","admw onbutton");	
	trans_inner("wifioffbutton2","admw offbutton");	

	trans_inner("passwordrequest","admw passwordrequest");
	trans_inner("passwordrequest2","admw passwordrequest");

	trans_inner("ssidrequest","admw ssidrequest");	
	trans_inner("ssidrequest2","admw ssidrequest");	

	trans_inner("wifiswitch","admw wifiswitch");	 

	trans_inner("channelchoose","admw channelchoose");	

	trans_inner("hidewifides","admw hidewifides");
	
	trans_inner("wifiswitch2","admw wifiswitch");	 

	trans_inner("channelchoose2","admw channelchoose");	

	trans_inner("hidewifides2","admw hidewifides");


	trans_inner("wPppoeTiming","admw opmode timing");
	trans_inner("PPPOE_TIMING","admw PPPOE_TIMING");
}

function inithidewifi()
{
	if(document.getElementById("AP_HIDESSID").value=="1")
	{
		document.getElementById("hidewifi").checked = true;
	}
	else
	{
		document.getElementById("hidewifi").checked = false;
	}
	
}
function inithidewifi2()
{
	if(document.getElementById("AP_HIDESSID_3").value=="1")
	{
		document.getElementById("hidewifi2").checked = true;
	}
	else
	{
		document.getElementById("hidewifi2").checked = false;
	}
	
}
function hidewififun()
{
	if(document.getElementById("hidewifi").checked == true)
		document.getElementById("AP_HIDESSID").value="1";
	else
		document.getElementById("AP_HIDESSID").value="0";
}
function hidewififun2()
{
	if(document.getElementById("hidewifi2").checked == true)
		document.getElementById("AP_HIDESSID_3").value="1";
	else
		document.getElementById("AP_HIDESSID_3").value="0";
}
function initValue()
{
	Butterlate.setTextDomain("admin");
	initTranslation();
	hideAllTables();
	disableWanSettings();
	disableWirelessSettings();
	switch_wifi();
	switch_wifi2();
	inithidewifi();
	inithidewifi2();
	step_num = 0;
	showothers = 0;
	showoadv = 0;
	linework = 0;
	var ifwdson = document.getElementById("WDSON").value;
	var ifwdson2 = document.getElementById("WDSON2").value;
	if(ifwdson=="on")
		document.wizard_form.AP_PRIMARY_CH.disabled = true;
	if(ifwdson2=="on")
		document.wizard_form.AP_PRIMARY_CH_3.disabled = true;

	widget_display("div_int_title");
	widget_display("div_int_opmode");	
	
	butwork("true","false","true","true");
}

function others() 
{
	if(showothers == 0)
	{
		widget_display("l2tptr1");
		widget_display("l2tptr2");
		widget_display("pptptr1");
		widget_display("pptptr2");
		showothers = 1;
	}
	else
	{
		widget_hide("l2tptr1");
		widget_hide("l2tptr2");
		widget_hide("pptptr1");
		widget_hide("pptptr2");
		showothers = 0;
	}
}
function advance() 
{
	if(showoadv == 0)
	{
		widget_display("div_pppoe_opmode");
		widget_display("div_pppoe_opmode_setting");
		showoadv = 1;
		pppoeOPModeSwitch();
	}
	else
	{
		widget_display("div_pppoe_opmode");
		widget_display("div_pppoe_opmode_setting");
		showoadv = 0;
	}
}

function pppshowpwd()
{
	var pass = document.getElementById("ppppass").value;
	if(document.getElementById("bbbb").checked == true)
	{
		document.getElementById("ppppwdinput").innerHTML='<input type="text" name="PPPOE_PWD" id="ppppass" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
	else
	{
		document.getElementById("ppppwdinput").innerHTML='<input type="password" name="PPPOE_PWD" id="ppppass" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
}
 function l2tpshowpwd()
{
   var pass = document.getElementById("l2tppass").value;

	if(document.getElementById("cccc").checked == true)
	{
		document.getElementById("pl2tppwdinput").innerHTML='<input type="text" name="l2tpPass" id="l2tppass" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
	}
	else
	{
		document.getElementById("pl2tppwdinput").innerHTML='<input type="password" name="l2tpPass" id="l2tppass" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
    }
}
 function p2tpshowpwd()
{
    var pass = document.getElementById("p2tppass").value;
	if(document.getElementById("dddd").checked == true)
	{
		document.getElementById("p2tppwdinput").innerHTML='<input type="text" name="pptpPass" id="p2tppass" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
	else
	{
		document.getElementById("p2tppwdinput").innerHTML='<input type="password" name="pptpPass" id="p2tppass" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
	}
}
 function showpwd()
{
 
	var pass = document.getElementById("pwd").value;
 
 	if(document.getElementById("eeee").checked == true)
 	{
   		document.getElementById("pwdinput").innerHTML='<input type="text" id="pwd" name="PSK_KEY" maxlength="63" size="28" class="handaer_text_content"  value="'+pass+'" />';
  	}
	else
	{
   		document.getElementById("pwdinput").innerHTML='<input type="password" id="pwd" name="PSK_KEY" maxlength="63" size="28"  class="handaer_text_content" value="'+pass+'" />';
   	}
}
 function showpwd2()
{
 
	var pass = document.getElementById("pwd2").value;
 
 	if(document.getElementById("eeee2").checked == true)
 	{
   		document.getElementById("pwdinput2").innerHTML='<input type="text" id="pwd2" name="PSK_KEY_3" maxlength="63" size="28" class="handaer_text_content"  value="'+pass+'" />';
  	}
	else
	{
   		document.getElementById("pwdinput2").innerHTML='<input type="password" id="pwd2" name="PSK_KEY_3" maxlength="63" size="28"  class="handaer_text_content" value="'+pass+'" />';
   	}
}
 

function switch_wifi()
{
	if(document.wizard_form.WIFION_OFF[0].checked == true)
	{
		widget_display("div_security_key");
		widget_display("tt1");
		widget_display("channel");
	}
	else
	{
		widget_hide("div_security_key");
		widget_hide("tt1");
		widget_hide("channel");
	}
	switch_security_mode();
}
function switch_wifi2()
{
	if(document.wizard_form.WIFION_OFF_3[0].checked == true)
	{
		widget_display("div_security_key2");
		widget_display("tt12");
		widget_display("channel2");
	}
	else
	{
		widget_hide("div_security_key2");
		widget_hide("tt12");
		widget_hide("channel2");
	}
	//window.parent.iFrameHeight();
	switch_security_mode2();
}
function waitgifshow()
{
	widget_hide("buttontable");
	window.parent.Demo(_("admw settingwaiting"));
}

function workoutgw()
{
	var myString=document.getElementById("WAN_IPADDR").value;	
	//ip地址
	var exp=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
	var reg = myString.match(exp);
	if(reg==null)
	{
		//document.getElementById("IPGW").value = "";
	}
	else
	{
		if(document.getElementById("IPGW").value=="")
		{
			var a = myString.lastIndexOf(".");
			var s;
			s = myString.substr(0, a); // 获取子字符串。
			document.getElementById("IPGW").value = s+".1";
		}
		if(document.getElementById("WAN_NETMASK").value=="")
		{
			document.getElementById("WAN_NETMASK").value = "255.255.255.0";
		}
		if(document.getElementById("PRIDNS").value=="")
		{
			document.getElementById("PRIDNS").value = "114.114.114.114";
		}

	}
}
function WIFI_HS()
{
	var RS = document.getElementById("RADIO_STATUS").value;
	if(RS=="1")
	{
		widget_hide("div_wireless2");
	}
	else if(RS=="2")
	{
		widget_hide("div_wireless1");
	}
}
</script>
</head>

<body onLoad="initValue()" oncontextmenu="window.event.returnValue=false" >
<div class="handaer_main">
<table  width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td>
<h1 id="qsettitle"></h1>
<p></p>
<form method="post" name="wizard_form">
<!-- ============= Wizard Home Page ============= -->

<!-- ============= wired or wireless ============= -->
<h2 id="div_int_title"></h2>
<table id="div_int_opmode" width="640" border="0" cellpadding="2" cellspacing="1">
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="int_1" type="radio" name="INT_MODE"  ~cINT_MODE:wired~  value="wired" checked></input>
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="int_1" id="int_1des" onClick=""></label></td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="int_1disc"></div></td>
</tr> 
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="int_2" type="radio" name="INT_MODE"  ~cINT_MODE:wireless~  value="wireless"></input>
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="int_2" id="int_2des" onClick=""></label></td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="int_2disc"></div></td>
</tr>

</table>
<!-- ============= Internet OP Mode ============= -->
<h2 id="div_wan_title"></h2>
<table id="div_wan_opmode" width="640" border="0" cellpadding="2" cellspacing="1">
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_3" type="radio" name="WAN_MODE" value="auto" checked>
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_3" id="AutoMode" onClick=""></label></td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="Autodisc"></div></td>
</tr> 

<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_4" type="radio" name="WAN_MODE"  ~cWAN_MODE:dhcp~  value="dhcp">
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_4" id="DHCP" onClick=""></label></td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="DHCPdisc"></div></td>
</tr> 
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_5" type="radio" name="WAN_MODE"  ~cWAN_MODE:static~  value="static">
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_5" id="SM" onClick=""></label></td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="SMdisc"></div></td>
</tr>
<tr>
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_6" type="radio" name="WAN_MODE"  ~cWAN_MODE:pppoe~ value="pppoe">
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_6" id="PPPOE" onClick=""></label></td>
</tr>
<tr>
  <td ><div style="margin-left: 43px;" id="PPPOEdisc"></div></td>
</tr>

<tr>
 <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_8" type="radio" name="WAN_MODE" ~cWAN_MODE:disable~ value="disable">
  <label style="font-size: 12pt; font-weight: bold; margin-left: 20px; color: #000000" for="wrad_8" id="DISABLE_a" onClick=""></label>
  </td>
</tr>
<tr >
  <td><div style="margin-left: 43px;" id="DISABLEdisc"></div></td>
</tr>

<tr  style="display:none">
  <td ><div style="margin-left: 43px;" id="Autodisc"></div></td>
  <td><input id="otherbutton" type="button" value="其他" class="handaer_small_button" onClick="others()" /></td>
</tr>
<tr id="l2tptr1" style="display:none">
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_7" type="radio" name="WAN_MODE" value="l2tp">
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_7" onClick="">L2TP</label></td>
</tr>
<tr id="l2tptr2" style="display:none">
  <td ><div style="margin-left: 43px;" id="L2TPc"></div></td>
</tr>
<tr id="pptptr1" style="display:none">
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_8" type="radio" name="WAN_MODE" value="pptp">
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_8" onClick="">PPTP</label></td>
</tr>
<tr id="pptptr2" style="display:none">
  <td ><div style="margin-left: 43px;" id="PPTPc"></div></td>
</tr>
<tr style="display:none">
  <td>
  <input style="font-size: 12pt; color: #000000" id="wrad_9" type="radio" name="WAN_MODE" value="3g">
  <label style="font-size: 12pt; font-weight: bold;; margin-left: 20px; color: #000000" for="wrad_9" onClick="">3G</label></td>
</tr>
<tr style="display:none">
  <td ><div style="margin-left: 43px;">3G Client</div></td>
</tr>
</table>

<!-- ================= STATIC Mode ================= -->
<h2 id="STIP_title"></h2>
<table id="div_wan_static" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="SMD"></td>
</tr>
<tr>
  <td class="head" id="IPA"></td>
  <td><input name="WAN_IPADDR" id="WAN_IPADDR" class="handaer_text_content" maxlength=15 value="~~WAN_IPADDR~"  onblur="workoutgw()"></td>
</tr>
<tr>
  <td class="head" id="SubMask"></td>
  <td><input name="WAN_NETMASK" id="WAN_NETMASK"  class="handaer_text_content" maxlength=15 value="~~WAN_NETMASK~">
  </td>
</tr>
<tr>
  <td class="head" id="defgw"></td>
  <td><input name="IPGW" id="IPGW"  class="handaer_text_content" maxlength=15 value="~~IPGW~">
  </td>
</tr>
<tr>
  <td class="head" id="pDNSserver"></td>
  <td><input name="PRIDNS" id="PRIDNS"  class="handaer_text_content" maxlength=15 value="~~SIPDNS1~"></td>
</tr>
<tr>
  <td class="head" id="sDNSserver"></td>
  <td><input name="SECDNS"  class="handaer_text_content" maxlength=15 value="~~SIPDNS2~"/><span style="height:30px; line-height:30px; padding:5px;" id="optionXX"></span></td>
</tr>
</table>

<!-- ================= PPPOE Mode ================= -->
<h2 id="PPP_title"></h2>
<table id="div_wan_pppoe" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="pppoemod"></td>
</tr>
<tr>
  <td class="head" id="uname"></td>
  <td><input name="PPPOE_USER"  style="ime-mode:disabled" class="handaer_text_content" maxlength=32 size=32 value="~~PPPOE_USER~"></td>
</tr>
<tr>
  <td class="head" id="pword"></td>
  <td><span id="ppppwdinput"><input type="password" id="ppppass" name="PPPOE_PWD" class="handaer_text_content" maxlength="32" size="32" value="~~PPPOE_PWD~"/></span>&nbsp;<input type="checkbox" id="bbbb" onClick="pppshowpwd()"/>&nbsp;<label for="bbbb" id="pppshowp"></label></td>
</tr>

<!--tr>
  <td><input id="advbutton" type="button"  class="handaer_small_button" onClick="advance()" /></td>
  <td>&nbsp; &nbsp;</td>
</tr-->
<tr id="div_pppoe_opmode" style="display:none">
  <td class="head" rowspan="2" id="opmope"></td>
  <td>
    <select name="PPPOE_MODE" size="1" onChange="pppoeOPModeSwitch()">
      <option ~sPPPOE_MODE:auto~ value="auto" id="wPppoeKeepAlive"></option>
      <option ~sPPPOE_MODE:demand~ value="demand" id="wPppoeOnDemand"></option>
      <option ~sPPPOE_MODE:manual~ value="manual" id="wPppoeManual"></option>
      <option ~sPPPOE_MODE:timing~ value="timing" id="wPppoeTiming"></option>
    </select>
  </td>
</tr>
<tr id="div_pppoe_opmode_setting" style="display:none">
<td>
	<span id="hide1"><span id="PPPOE_KAM"></span><input type="text" style="ime-mode:disabled" name="PPPOE_DEMAND" class="handaer_text_small_content" maxlength="5" size="3" value="~~PPPOE_DEMAND~"/><span id="PPPOE_seconds"></span></br></span>
  	<span id="hide2"><span id="PPPOE_ODM"></span><input type="text" style="ime-mode:disabled" name="PPPOE_MANUAL" class="handaer_text_small_content" maxlength="3" size="2" value="~~PPPOE_MANUAL~"/><span id="PPPOE_minutes"></span></br></span>
	<span id="hide3"><span id="PPPOE_TIMING"></span>
	<input type="text" name="PPPOE_TIMING_BH" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_BH~"/>:
	<input type="text" name="PPPOE_TIMING_BM" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_BM~"/>-
	<input type="text" name="PPPOE_TIMING_EH" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_EH~"/>:
	<input type="text" name="PPPOE_TIMING_EM" class="handaer_text_small_content" maxlength="2" size="2" value="~~PPPOE_TIMING_EM~"/></span>
</td>
</tr>
</table>

<!-- ================= L2TP Mode ================= -->
<table id="div_wan_l2tp" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="L2TPM"></td>
</tr>
<tr>
  <td class="head" id="L2TPSIP"></td>
  <td><input name="l2tpServer"  class="handaer_text_content" maxlength="15" size=15 value="~~l2tpServer~"></td>
</tr>
<tr>
  <td class="head" id="L2TPname" ></td>
  <td><input name="l2tpUser"  class="handaer_text_content" maxlength="20" size=20 value="~~l2tpUser~"></td>
</tr>
<tr>
  <td class="head" id="L2TPpwd"></td>
  <td><span id="pl2tppwdinput"><input type="password" id="l2tppass" name="l2tpPass"  class="handaer_text_content" maxlength="32" size="32" value="~~l2tpPass~"/></span>&nbsp;<input type="checkbox" id="cccc" onClick="l2tpshowpwd()"/>&nbsp;<label for="cccc" id="l2tpshowp"></label></td>
</tr>
<tr>
  <td class="head" id="L2TPAM"></td>
  <td>
    <select name="l2tpMode" size="1" onChange="l2tpModeSwitch()">
      <option value="0" id="l2tpMs"></option>
      <option value="1" id="l2tpMd"></option>
    </select>
  </td>
</tr>
<tr id="div_l2tpIp">
  <td class="head" id="L2TP_IP"></td>
  <td><input name="l2tpIp" maxlength=15 size=15  class="handaer_text_content" value="~~l2tpIp~"></td>
</tr>
<tr id="div_l2tpNetmask">
  <td class="head" id="L2TPSM"></td>
  <td><input name="l2tpNetmask" maxlength=15  class="handaer_text_content" size=15 value="~~l2tpNetmask~">
  </td>
</tr>
<tr id="div_l2tpGateway">
  <td class="head" id="L2TPDG"></td>
  <td><input name="l2tpGateway"  class="handaer_text_content" maxlength=15 size=15 value="~~l2tpGateway~">
  </td>
</tr>
<tr>
  <td class="head" rowspan="3" id="L2TPOM"></td>
  <td>
    <select name="l2tpOPMode" size="1" onChange="l2tpOPModeSwitch()">
      <option value="KeepAlive" selected id="L2TPka"></option>
      <!--
      <option value="OnDemand" id="wL2tpOnDemand">On Demand</option>
      -->
      <option value="Manual" id="L2TPMa"></option>
    </select>
  </td>
</tr>
<tr>
  <td>
   <span id="L2TP_KAM"></span>
    <input type="text" name="l2tpRedialPeriod" maxlength="5" size="3" value="60">
    <span id="L2TP_seconds">
    <!--
    <br />
    On demand Mode:  Idle Time
    <input type="text" name="l2tpIdleTime" maxlength="3" size="2" value="5">
    minutes
    -->
  </span>
  </td>
</tr>
</table>

<!-- ================= PPTP Mode ================= -->
<table id="div_wan_pptp" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="PPM"></td>
</tr>
<tr>
  <td class="head" id="PPSIP"></td>
  <td><input name="pptpServer"  class="handaer_text_content" maxlength="15" size=15 value="~~pptpServer~"></td>
</tr>
<tr>
  <td class="head" id="PPuname"></td>
  <td><input name="pptpUser"  class="handaer_text_content"  maxlength="20" size=20 value="~~pptpUser~"></td>
</tr>
<tr>
  <td class="head" id="PPpwd"></td>
  <td><span id="p2tppwdinput"><input type="password" id="p2tppass" name="pptpPass"  class="handaer_text_content" maxlength="32" size="32" value="~~pptpPass~" /></span><input type="checkbox" id="dddd" onClick="p2tpshowpwd()"/><label for="dddd" id="p2tpshowp"></label></td>
</tr>
<tr>
  <td class="head" id="PPAM"></td>
  <td>
    <select name="pptpMode" size="1" onChange="pptpModeSwitch()">
      <option value="0" id="PPS"></option>
      <option value="1" id="PPD"></option>
    </select>
  </td>
</tr>
<tr id="div_pptpIp">
  <td class="head" id="PPIP"></td>
  <td><input name="pptpIp"  class="handaer_text_content" maxlength=15 size=15 value="~~pptpIp~"></td>
</tr>
<tr id="div_pptpNetmask">
  <td class="head" id="PPSM"></td>
  <td><input name="pptpNetmask"  class="handaer_text_content" maxlength=15 size=15 value="~~pptpNetmask~">
  </td>
</tr>
<tr id="div_pptpGateway">
  <td class="head" id="PPDG"></td>
  <td><input name="pptpGateway"  class="handaer_text_content" maxlength=15 size=15 value="~~pptpGateway~">
  </td>
</tr>
<tr>
  <td class="head" rowspan="3" id="PPOM"></td>
  <td>
    <select name="pptpOPMode" size="1" onChange="pptpOPModeSwitch()">
      <option value="KeepAlive" id="PPKA" selected></option>
      <!--
      <option value="OnDemand" id="wPptpOnDemand">On Demand</option>
      -->
      <option value="Manual" id="PPma"></option>
    </select>
  </td>
</tr>
<tr>
  <td>
    <span id="PPtP_KAM"></span>
    <input type="text" name="pptpRedialPeriod" maxlength="5" size="3" value="60">
    <span id="PPtP_seconds">
    <!--
    <br />
    On demand Mode:  Idle Time
    <input type="text" name="pptpIdleTime" maxlength="3" size="2" value="5">
    minutes
    -->
    </span>
  </td>
</tr>
</table>

<!-- =========== 3G Modular =========== -->
<table id="div_wan_3G" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2"></td>
</tr>
<tr>
  <td class="head" rowspan="3"></td>
  <td>
    <select name="Dev3G" size="1">
      <option value="MU-Q101">NU MU-Q101</option>
      <option value="HUAWEI-E169">HUAWEI E169</option>
      <option value="BandLuxe-C270">BandLuxe C270</option>
      <option value="OPTION-ICON225">OPTION ICON 225</option>
    </select>
  </td>
</tr>
</table>

<h2 id="div_wireless_title"></h2>
<!-- =========== Wireless Settings =========== -->
<table id="div_wireless" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="A_title"></td>
</tr>
</table>
<table id="div_wireless1" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr><td class="title2" colspan="2" id="wsetingst"></td></tr>
<tr>
  <td class="head" id="nname"></td>
  <td><input type="text" name="AP_SSID" size="32" maxlength="24" class="handaer_text_content" value="~~AP_SSID~">&nbsp;<input type="checkbox" id="hidewifi" onClick="hidewififun();"/>&nbsp;<label for="hidewifi" id="hidewifides"></label>&nbsp;<span id="ssidrequest"></span></td>
</tr>

<tr>
 <td class="head" id="wifiswitch"></td>
	<td><input type="radio" ~cWIFION_OFF:on~ id="rad_3" name="WIFION_OFF" value="on" onClick="switch_wifi();"/><label for="rad_3"  id="wifionbutton"></label>
	<input type="radio" ~cWIFION_OFF:off~  id="rad_4" name="WIFION_OFF" value="off"  onclick="switch_wifi();"/><label for="rad_4"  id="wifioffbutton"></label>
	</td>
</tr>
<tr id="channel">
  <td class="head" id="channelchoose"></td>
  <td>
    <select name="AP_PRIMARY_CH" size="1">
	  <!--option ~sAP_CHANNEL:0~ value="0" id="channelauto"></option-->
	  <option ~sAP_PRIMARY_CH:1~ value="1">1</option>
      <option ~sAP_PRIMARY_CH:2~ value="2">2</option>
      <option ~sAP_PRIMARY_CH:3~ value="3">3</option>
      <option ~sAP_PRIMARY_CH:4~ value="4">4</option>
      <option ~sAP_PRIMARY_CH:5~ value="5">5</option>
      <option ~sAP_PRIMARY_CH:6~ value="6">6</option>
      <option ~sAP_PRIMARY_CH:7~ value="7">7</option>
      <option ~sAP_PRIMARY_CH:8~ value="8">8</option>
      <option ~sAP_PRIMARY_CH:9~ value="9">9</option>
      <option ~sAP_PRIMARY_CH:10~ value="10">10</option>
      <option ~sAP_PRIMARY_CH:11~ value="11">11</option>
      <option ~sAP_PRIMARY_CH:12~ value="12">12</option>
      <option ~sAP_PRIMARY_CH:13~ value="13">13</option>
    </select>
  </td>
</tr>
<tr id="tt1">
  <td class="head" id="security"></td>
  <td>
    <select name="AP_SECMODE" size="1" style="width:150px" onChange="switch_security_mode();">
	  <option ~sAP_SECMODE:WPA~ value="WPA" id="Senable" ></option>
      <option ~sAP_SECMODE:None~  value="None" id="Sdisable"></option>
    </select>
  </td>
</tr>
<tr id="div_security_key">
	<td class="head" id="wkey"></td>
	<td><span id="pwdinput"><input type="password" id="pwd" name="PSK_KEY" maxlength="63" size="28"  class="handaer_text_content"  value="~~PSK_KEY~"/></span>&nbsp;<input type="checkbox" id="eeee" onClick="showpwd()" />&nbsp;<label for="eeee" id="showp"></label>&nbsp;<span id="passwordrequest"></span></td>
</tr>
</table>

<!-----------------------5GHz---------------------------------------->
<table id="div_wireless2" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr><td class="title2" colspan="2" id="wsetingst2"></td></tr>
<tr>
  <td class="head" id="nname2"></td>
  <td><input type="text" name="AP_SSID_3" size="32" maxlength="24" class="handaer_text_content" value="~~AP_SSID_3~">&nbsp;<input type="checkbox" id="hidewifi2" onClick="hidewififun2();"/>&nbsp;<label for="hidewifi2" id="hidewifides2"></label>&nbsp;<span id="ssidrequest2"></span></td>
</tr>

<tr>
 <td class="head" id="wifiswitch2"></td>
	<td><input type="radio" ~cWIFION_OFF_3:on~ id="rad_32" name="WIFION_OFF_3" value="on" onClick="switch_wifi2();"/><label for="rad_32"  id="wifionbutton2"></label>
	<input type="radio" ~cWIFION_OFF_3:off~  id="rad_42" name="WIFION_OFF_3" value="off"  onclick="switch_wifi2();"/><label for="rad_42"  id="wifioffbutton2"></label>
	</td>
</tr>
<tr id="channel2">
  <td class="head" id="channelchoose2"></td>
  <td>
    <select name="AP_PRIMARY_CH_3" size="1">
	  <option ~sAP_PRIMARY_CH_3:149~ value="149">149</option>
      <option ~sAP_PRIMARY_CH_3:153~ value="153">153</option>
      <option ~sAP_PRIMARY_CH_3:157~ value="157">157</option>
      <option ~sAP_PRIMARY_CH_3:161~ value="161">161</option>
      <option ~sAP_PRIMARY_CH_3:165~ value="165">165</option>
    </select>
  </td>
</tr>
<tr id="tt12">
  <td class="head" id="security2"></td>
  <td>
    <select name="AP_SECMODE_3" size="1" style="width:150px" onChange="switch_security_mode2();">
	  <option ~sAP_SECMODE_3:WPA~ value="WPA" id="Senable2" ></option>
      <option ~sAP_SECMODE_3:None~  value="None" id="Sdisable2"></option>
    </select>
  </td>
</tr>
<tr id="div_security_key2">
	<td class="head" id="wkey2"></td>
	<td><span id="pwdinput2"><input type="password" id="pwd2" name="PSK_KEY_3" maxlength="63" size="28"  class="handaer_text_content"  value="~~PSK_KEY_3~"/></span>&nbsp;<input type="checkbox" id="eeee2" onClick="showpwd2()" />&nbsp;<label for="eeee2" id="showp2"></label>&nbsp;<span id="passwordrequest2"></span></td>
</tr>
</table>


<table width="540" cellpadding="2" cellspacing="1" id="buttontable">
<tr align="center">
  <td>
    <input type="button" name="back_motion" id="bBACK" class="handaer_input"  value="Back" onClick="change_step(-1);">
    <input type="button" name="next_motion" id="bNEXT" class="handaer_input"  value="Next" onClick="change_step(1);">
    <input type="button" name="cancel_motion" id="bCANCEL" class="handaer_input"  value="Cancel" onClick="change_step(0);">
    <input type="button" name="apply_motion" id="bAPPLY" class="handaer_input"  value="Apply" onClick="change_step(1);">

    <input type="submit" name="DHCPW" id="DHCPW" style="display:none" value="DHCPW">
    <input type="submit" name="SIPW" id="SIPW" style="display:none" value="SIPW">
    <input type="submit" name="PPPW" id="PPPW" style="display:none" value="PPPW">
    <input type="submit" name="L2TPW" id="L2TPW" style="display:none" value="L2TPW">
    <input type="submit" name="P2TPW" id="P2TPW" style="display:none" value="P2TPW">
    <input type="submit" name="DISABLEW_WAN" id="DISABLEW_WAN" style="display:none" value="DISABLEW_WAN">

    <input type="button" name="CHECKLINE" id="CHECKLINE" style="display:none" value="CHECKLINE" onClick="window.location.href='w1'">
	<input type="text" style="display:none" name="LINEIN_OUT" id="LINEIN_OUT" size="20" maxlength="32" value="~~LINEIN_OUT~">	

	<input type="text" style="display:none" name="AP_HIDESSID" id="AP_HIDESSID" size="20" maxlength="32" value="~~AP_HIDESSID~">	
	<input type="text" style="display:none" name="AP_HIDESSID_3" id="AP_HIDESSID_3" size="20" maxlength="32" value="~~AP_HIDESSID_3~">	
	<input type="text" style="display:none" name="AP_locatIP" id="AP_locatIP" size="20" maxlength="32" value="~~AP_IPADDR~">	
	<input type="text" style="display:none" name="WDSON" id="WDSON" size="20" maxlength="32" value="~~WDSON_OFF~">
	<input type="text" style="display:none" name="WDSON2" id="WDSON2" size="20" maxlength="32" value="~~WDSON_OFF_3~">
	<input type="text" style="display:none" name="RADIO_STATUS" id="RADIO_STATUS" size="20" maxlength="32" value="~~RADIO_STATUS~">
</td>
</tr>
</table>
</form>



</td></tr></table>
</div>
</body>

</html>

