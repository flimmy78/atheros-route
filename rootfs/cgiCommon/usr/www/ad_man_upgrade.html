<html>
<head>
<title></title>
<LINK REL="stylesheet" HREF="/style/handaer.css" TYPE="text/css" media="all">
<link rel="stylesheet" href="/style/normal_ws.css" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META http-equiv=Pragma content=no-cache>
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<script type="text/javascript" src="/lang/b28n.js"></script>
<script language="JavaScript" type="text/javascript" src="/style/load.js"></script>
<script type="text/javascript">
function getCookie()
{ 
	var strCookie=document.cookie; 
	var arrCookie=strCookie.split("; "); 
	for(var i=0;i<arrCookie.length;i++)
	{ 
		var arr=arrCookie[i].split("="); 
		if(arr[0]=="userName")
		{
			//alert("已经登录");
			return true;
		}
	} 
	//alert("未登录");
	return false; 
}
if(getCookie())
{
	
}
else
{
	window.top.location.href="../login.html";	
}
function style_display_on(){if (window.ActiveXObject){return "inline-block";}else if (window.XMLHttpRequest){return "table-row";}}
function widget_hide(widgetID){document.getElementById(widgetID).style.visibility = "hidden";document.getElementById(widgetID).style.display = "none";}
function widget_display(widgetID){document.getElementById(widgetID).style.visibility = "visible";document.getElementById(widgetID).style.display = style_display_on();}

function trans_inner(widgetID,xmlname){var e = document.getElementById(widgetID);e.innerHTML = _(xmlname);}
function trans_value(widgetID,xmlname){var e = document.getElementById(widgetID);e.value = _(xmlname);}
function button_commit(buttonID){document.getElementById(buttonID).click();}
function initTranslation()
{
	trans_inner("uploadtitle","admw uploadtitle");
	trans_inner("uploaddes","admw uploaddes");
	trans_inner("uploadfirware","admw uploadfirware");
	trans_inner("up_selsectfile","admw up_selsectfile");
	trans_value("Upload","admw Upload");
	trans_inner("hardware","admw hardware");	
	trans_inner("software","admw software");	
	trans_inner("waring","admw waring");	
}

function waitgifshow()
{
	Butterlate.setTextDomain("other");
	window.parent.Demo3(_("FUPLOAD"));
	window.parent.beginshow(1800);
}

function upgradef()
{ 
	if(document.usb_upload.uploadedfile.value == "")
	{
		document.usb_upload.uploadedfile.focus();
		alert(_("err file empty"));
		return false;
	}

	if(confirm(_("admw sysupgrade")))
	{
		waitgifshow();
		window.parent.ttzhuan(document.getElementById("IPA").value);
		button_commit('UPGRADE');
	}	
}

function init()
{
	Butterlate.setTextDomain("admin");
	initTranslation();
}
  var isIE;
  function fileChange(target) 
  {     
      
	var fileSize = 0; 
	isIE = /msie/i.test(navigator.userAgent) && !window.opera;	
	if (isIE && !target.files) 
	{      
		var filePath = target.value;      
		var fileSystem = new ActiveXObject("Scripting.FileSystemObject"); 
		var file = fileSystem.GetFile (filePath);      
		fileSize = file.Size;     
	} 
	else 
	{     
		fileSize = target.files[0].size;      
	}    
	var size = fileSize / 1024;     
	if(size>15000)
	{   
		alert(_("err bin big"));
	}
} 
</script>
</head>

<body onload="init();" oncontextmenu="window.event.returnValue=false" >
<div class="handaer_main">
<table  border="0" cellpadding="0" cellspacing="0" id="tt1"><tr><td>
<h1 id="uploadtitle"></h1>
<form name="usb_upload" enctype="multipart/form-data" action="/cgi-bin/upload.cgi" method="post">
<h2 id="uploaddes"></h2>

<table id="uploadff" width="100%" cellpadding="0" cellspacing="0"   class="handaer_text">
<tr>
  <td class="title" colspan="2" id="uploadfirware"></td>
</tr>

<tr>
  <td class="head" id="hardware"></td>
  <td><input type="text" size="35" class="handaer_text" value="~~HAL_VERSION~" readonly></td>
</tr>
<tr>
  <td class="head" id="software"></td>
  <td><input type="text" size="35" class="handaer_text" value="~~SOFT_VERSION~" readonly></td>
</tr>
<tr>
  <td class="head" id="up_selsectfile"></td>
  <td>
	<input type="file" id="uploadedfile" style="border-width:1px;font-family:'微软雅黑';font-size:12px;color: #000000;  cursor:hand; " name="uploadedfile" onchange="fileChange(this);">
  </td>
</tr>
<tr>
  <td class="head">&nbsp; &nbsp;</td>
  <td>
  <span align="center" id="waring" style="color:#ff3c00"></span>
  </td>
</tr>
<tr>
  <td class="head">&nbsp; &nbsp;</td>
  <td>
	<input id="Upload" class="handaer_input" onclick="upgradef()" type="button" name="Upload" value="Upload">
	<input type="submit" name="UPGRADE" style="display:none" id="UPGRADE" value="UPGRADE">
  </td>
</tr>
</table>
</form>
</td>
</tr>
</table>

</div>
<input type="text" style="display:none" name="IPA" id="IPA" size="20" maxlength="32" value="~~AP_IPADDR~">
</body>
</html>
