<html>
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<LINK REL="stylesheet" HREF="/style/handaer.css" TYPE="text/css" media="all">
<link rel="stylesheet" href="/style/normal_ws.css" type="text/css">
<script type="text/javascript" src="/lang/b28n.js"></script>
<script language="JavaScript" type="text/javascript">
var hbd;
function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)","i");
        var r = window.location.search.substr(1).match(reg);
        if (r!=null) return (r[2]); return null;
}
hbd=GetQueryString("adminset");
if(hbd)
{
}
else
{
        window.location.href="/index.html";
}
function button_commit(buttonID){document.getElementById(buttonID).click();}
function checkInjection(str)
{
	var len = str.length;
	for (var i=0; i<str.length; i++) {
		if ( str.charAt(i) == '\r' || str.charAt(i) == '\n'){
				return false;
		}else
	        continue;
	}
    return true;
}

function refresh_all()
{	
	window.top.location.href = "http://10.10.10.254"; 
} 
function update()
{ 
	self.setTimeout("refresh_all()", 3);
}



function AdmFormCheck()
{
	if (document.Adm.ADMPASS.value.length == 0)
	{
		alert(_("err pwd empty"));
		document.Adm.ADMPASS.select();
		return false;
	}
	if ((document.Adm.ADMPASS.value.length  < 5)||(document.Adm.ADMPASS.value.length > 12))
	{
		alert(_("err pwd length"));
		document.Adm.ADMPASS.select();
		return false;
	}
	{
		var xxx=document.Adm.ADMPASS.value;  //用户名（在此赋值）

		var reg  = /^[a-z || A-Z || 0-9]\w+$/;
		var m = reg.test(xxx);
		if(m)   
		{   
		}   
		else   
		{   
			alert(_("err keychar"));
			document.Adm.ADMPASS.select();
			return false;
		} 

	}
	
	if (document.Adm.ADMPASS.value != document.Adm.ADMPASS2.value) 
	{
		alert(_("err pwd mismatch"));
		return false;
	}
	//alert(_("password change"));
	//update();
	Butterlate.setTextDomain("admin");
	window.parent.Demo(_("admw pwdwaiting"));
	button_commit('ADMINSET');
	return true;
}

function initTranslation()
{
	Butterlate.setTextDomain("admin");
	
	var e = document.getElementById("manAdmSet");
	e.innerHTML = _("man admin setting");

	e = document.getElementById("manAdmPasswd");
	e.innerHTML = _("admw pword");
	e = document.getElementById("manAdmPasswd2");
	e.innerHTML = _("admw vpword");
	
	e = document.getElementById("manAdmApply");	
	e.value = _("admin apply");
	e = document.getElementById("showp");
	e.innerHTML = _("admw showp");	
	e = document.getElementById("securitydes");
	e.innerHTML = _("admw securitydes");	
	e = document.getElementById("securitytitle");
	e.innerHTML = _("man admin setting");
	e = document.getElementById("passwordrequest");
	e.innerHTML = _("admw passwordrequest1");
}
function initValue()
{
	initTranslation();
}
function showpwd()
{
    var pass = document.getElementById("pwd").value;

	if(document.getElementById("aaaa").checked == true)
	{
		document.getElementById("pwdinput").innerHTML='<input type="text" name="ADMPASS" id="pwd" maxlength="32" size="32"  class="handaer_text_content" value="'+pass+'" />';
	}
	else
	{
		document.getElementById("pwdinput").innerHTML='<input type="password" name="ADMPASS" id="pwd" maxlength="32" size="32" class="handaer_text_content"  value="'+pass+'" />';
	}
}

</script>
</head>

<body onLoad="initValue()" ondragstart="window.event.returnValue=false" oncontextmenu="window.event.returnValue=false" onselectstart="event.returnValue=false">
<div class="handaer_main">
<table  border="0" cellpadding="0" cellspacing="0"><tr><td>
<!-- ================= Adm Settings ================= -->
<h1 id="securitytitle"></h1>
<form method="post" name="Adm">
<h2 id="securitydes"></h2>
<table id="table2" cellpadding="0" cellspacing="0"   class="handaer_text">
  <tr>
    <td class="title" colspan="2" id="manAdmSet"></td>
  </tr>

  <tr>
    <td class="head" id="manAdmPasswd"></td>
    <td><span id="pwdinput"><input type="password" id="pwd" name="ADMPASS" maxlength="12" size="32" class="handaer_text_content" value="~~ADMPASS~" /></span>&nbsp;<input type="checkbox" id="aaaa" onClick="showpwd()"/>&nbsp;<label for="aaaa" id="showp"></label>&nbsp;<span id="passwordrequest"></span></td>
  </tr>
  <tr>
    <td class="head" id="manAdmPasswd2"></td>
    <td><input type="password" name="ADMPASS2" maxlength="12" size="32" value="~~ADMPASS2~" class="handaer_text_content"></td>
  </tr>
 </table>
<table id="table22" width="540" cellpadding="2" cellspacing="1"">
  <tr align="center">
    <td>
      <input type="button"  class="handaer_input" value="Apply" id="manAdmApply" onClick="return AdmFormCheck()">
	  <input type="submit" name="ADMINSET" id="ADMINSET" style="display:none" value="ADMINSET">
    </td>
  </tr>
</table>
<!--/form-->
</td></tr></table></div>

</body>
</html>
